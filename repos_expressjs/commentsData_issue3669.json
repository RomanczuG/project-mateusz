[
  {
    "url": "https://api.github.com/repos/expressjs/express/issues/comments/396757214",
    "html_url": "https://github.com/expressjs/express/issues/3669#issuecomment-396757214",
    "issue_url": "https://api.github.com/repos/expressjs/express/issues/3669",
    "id": 396757214,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5Njc1NzIxNA==",
    "user": {
      "login": "wesleytodd",
      "id": 1027776,
      "node_id": "MDQ6VXNlcjEwMjc3NzY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1027776?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/wesleytodd",
      "html_url": "https://github.com/wesleytodd",
      "followers_url": "https://api.github.com/users/wesleytodd/followers",
      "following_url": "https://api.github.com/users/wesleytodd/following{/other_user}",
      "gists_url": "https://api.github.com/users/wesleytodd/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/wesleytodd/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/wesleytodd/subscriptions",
      "organizations_url": "https://api.github.com/users/wesleytodd/orgs",
      "repos_url": "https://api.github.com/users/wesleytodd/repos",
      "events_url": "https://api.github.com/users/wesleytodd/events{/privacy}",
      "received_events_url": "https://api.github.com/users/wesleytodd/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-12T22:40:14Z",
    "updated_at": "2018-06-12T22:40:14Z",
    "author_association": "MEMBER",
    "body": "Seems weird to me.  Technically express calls `typeis(req, ['application/vnd.api+json'])` which calls `typeis(req.headers['content-type'], ['application/vnd.api+json'])` from inside the `type-is` package.  Can you check what happens with these scenarios just to rule out the differences between what you posted?",
    "reactions": {
      "url": "https://api.github.com/repos/expressjs/express/issues/comments/396757214/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/expressjs/express/issues/comments/396761427",
    "html_url": "https://github.com/expressjs/express/issues/3669#issuecomment-396761427",
    "issue_url": "https://api.github.com/repos/expressjs/express/issues/3669",
    "id": 396761427,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5Njc2MTQyNw==",
    "user": {
      "login": "canterberry",
      "id": 4053794,
      "node_id": "MDQ6VXNlcjQwNTM3OTQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4053794?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/canterberry",
      "html_url": "https://github.com/canterberry",
      "followers_url": "https://api.github.com/users/canterberry/followers",
      "following_url": "https://api.github.com/users/canterberry/following{/other_user}",
      "gists_url": "https://api.github.com/users/canterberry/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/canterberry/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/canterberry/subscriptions",
      "organizations_url": "https://api.github.com/users/canterberry/orgs",
      "repos_url": "https://api.github.com/users/canterberry/repos",
      "events_url": "https://api.github.com/users/canterberry/events{/privacy}",
      "received_events_url": "https://api.github.com/users/canterberry/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-12T23:02:05Z",
    "updated_at": "2018-06-12T23:02:37Z",
    "author_association": "NONE",
    "body": "```javascript\r\n// This throws an error:\r\ntypeis(request.headers['content-type'], ['application/vnd.api+json'])\r\n```\r\n\r\nCode:\r\n\r\n```javascript\r\n  console.log(JSON.stringify({\r\n    'request.is()': request.is('application/vnd.api+json'),\r\n    'request.get()': request.get('Content-Type'),\r\n    'typeis(request)': typeis(request, ['application/vnd.api+json']),\r\n    'request.headers[]': request.headers['content-type']\r\n  }, null, 2));\r\n```\r\n\r\nOutput:\r\n\r\n```json\r\n{\r\n  \"request.is()\": null,\r\n  \"request.get()\": \"application/vnd.api+json\",\r\n  \"typeis(request)\": null,\r\n  \"request.headers[]\": \"application/vnd.api+json\"\r\n}\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/expressjs/express/issues/comments/396761427/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/expressjs/express/issues/comments/396762569",
    "html_url": "https://github.com/expressjs/express/issues/3669#issuecomment-396762569",
    "issue_url": "https://api.github.com/repos/expressjs/express/issues/3669",
    "id": 396762569,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5Njc2MjU2OQ==",
    "user": {
      "login": "dougwilson",
      "id": 67512,
      "node_id": "MDQ6VXNlcjY3NTEy",
      "avatar_url": "https://avatars.githubusercontent.com/u/67512?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dougwilson",
      "html_url": "https://github.com/dougwilson",
      "followers_url": "https://api.github.com/users/dougwilson/followers",
      "following_url": "https://api.github.com/users/dougwilson/following{/other_user}",
      "gists_url": "https://api.github.com/users/dougwilson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dougwilson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dougwilson/subscriptions",
      "organizations_url": "https://api.github.com/users/dougwilson/orgs",
      "repos_url": "https://api.github.com/users/dougwilson/repos",
      "events_url": "https://api.github.com/users/dougwilson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dougwilson/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-12T23:08:23Z",
    "updated_at": "2018-06-12T23:08:23Z",
    "author_association": "MEMBER",
    "body": "Ok, you seem to be providing conflicting information and it's hard to follow a moving target. In the original post you said req.is is returning false, which means no match. Your latest is showing that req.is is returning null, which means the request has no body, which is different.\r\n\r\nPerhaps the best way to proceed here to to provide the exact steps to reproduce. All of the following, please:\r\n\r\n1. Version of Node.js\r\n2. Complete source code we can copy and paste and run without any modification. \r\n3. The exact steps to make the source provided in number 2 provide the output you are showing.\r\n\r\nThank you!",
    "reactions": {
      "url": "https://api.github.com/repos/expressjs/express/issues/comments/396762569/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/expressjs/express/issues/comments/396763234",
    "html_url": "https://github.com/expressjs/express/issues/3669#issuecomment-396763234",
    "issue_url": "https://api.github.com/repos/expressjs/express/issues/3669",
    "id": 396763234,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5Njc2MzIzNA==",
    "user": {
      "login": "wesleytodd",
      "id": 1027776,
      "node_id": "MDQ6VXNlcjEwMjc3NzY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1027776?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/wesleytodd",
      "html_url": "https://github.com/wesleytodd",
      "followers_url": "https://api.github.com/users/wesleytodd/followers",
      "following_url": "https://api.github.com/users/wesleytodd/following{/other_user}",
      "gists_url": "https://api.github.com/users/wesleytodd/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/wesleytodd/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/wesleytodd/subscriptions",
      "organizations_url": "https://api.github.com/users/wesleytodd/orgs",
      "repos_url": "https://api.github.com/users/wesleytodd/repos",
      "events_url": "https://api.github.com/users/wesleytodd/events{/privacy}",
      "received_events_url": "https://api.github.com/users/wesleytodd/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-12T23:11:51Z",
    "updated_at": "2018-06-12T23:11:51Z",
    "author_association": "MEMBER",
    "body": "For reference: https://github.com/jshttp/type-is/blob/master/index.js#L127",
    "reactions": {
      "url": "https://api.github.com/repos/expressjs/express/issues/comments/396763234/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/expressjs/express/issues/comments/396797149",
    "html_url": "https://github.com/expressjs/express/issues/3669#issuecomment-396797149",
    "issue_url": "https://api.github.com/repos/expressjs/express/issues/3669",
    "id": 396797149,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5Njc5NzE0OQ==",
    "user": {
      "login": "canterberry",
      "id": 4053794,
      "node_id": "MDQ6VXNlcjQwNTM3OTQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4053794?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/canterberry",
      "html_url": "https://github.com/canterberry",
      "followers_url": "https://api.github.com/users/canterberry/followers",
      "following_url": "https://api.github.com/users/canterberry/following{/other_user}",
      "gists_url": "https://api.github.com/users/canterberry/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/canterberry/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/canterberry/subscriptions",
      "organizations_url": "https://api.github.com/users/canterberry/orgs",
      "repos_url": "https://api.github.com/users/canterberry/repos",
      "events_url": "https://api.github.com/users/canterberry/events{/privacy}",
      "received_events_url": "https://api.github.com/users/canterberry/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-13T02:51:24Z",
    "updated_at": "2018-06-13T02:53:06Z",
    "author_association": "NONE",
    "body": "@dougwilson My apologies for providing too much information in an example that does come across as a bit convoluted. Here, let me simplify this to the simplest possible case:\r\n\r\n```javascript\r\n// Returns \"application/vnd.api+json\"\r\nrequest.get('Content-Type');\r\n\r\n// Returns \"application/vnd.api+json\"\r\nrequest.headers['content-type'];\r\n\r\n// Returns `null`, expected \"application/vnd.api+json\"\r\nrequest.is('application/vnd.api+json');\r\n```\r\n\r\nFor reference: [`Request#is()`](https://expressjs.com/en/api.html#req.is) is described as follows:\r\n\r\n> Returns the matching content type if the incoming request’s “Content-Type” HTTP header field matches the MIME type specified by the `type` parameter. Returns `false` otherwise.\r\n\r\nThe actual behavior conflicts with the documented behavior. There is no mention in the documentation of whether a request body affects the return value.",
    "reactions": {
      "url": "https://api.github.com/repos/expressjs/express/issues/comments/396797149/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/expressjs/express/issues/comments/396797822",
    "html_url": "https://github.com/expressjs/express/issues/3669#issuecomment-396797822",
    "issue_url": "https://api.github.com/repos/expressjs/express/issues/3669",
    "id": 396797822,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5Njc5NzgyMg==",
    "user": {
      "login": "dougwilson",
      "id": 67512,
      "node_id": "MDQ6VXNlcjY3NTEy",
      "avatar_url": "https://avatars.githubusercontent.com/u/67512?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dougwilson",
      "html_url": "https://github.com/dougwilson",
      "followers_url": "https://api.github.com/users/dougwilson/followers",
      "following_url": "https://api.github.com/users/dougwilson/following{/other_user}",
      "gists_url": "https://api.github.com/users/dougwilson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dougwilson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dougwilson/subscriptions",
      "organizations_url": "https://api.github.com/users/dougwilson/orgs",
      "repos_url": "https://api.github.com/users/dougwilson/repos",
      "events_url": "https://api.github.com/users/dougwilson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dougwilson/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-13T02:56:03Z",
    "updated_at": "2018-06-13T02:56:03Z",
    "author_association": "MEMBER",
    "body": "The `req.is` has always returned `null` when there is no body; it has been that way forever. If the documentation doesn't reflect that, we can fix the documentation to correctly describe the behavior.\r\n\r\nThe value `null` is retued when there is no request body. Just having a `Content-Type` header doesn't actually give a body in the request, of course. You'll need an actual body with the request in order for `req.is` to return any value other than `null`.\r\n\r\nIf you would like to help fix the documentation, you're always welcome to make a pull request to https://github.com/expressjs/expressjs.com (or even just open an issue so someone can fix the documentation).\r\n\r\nAs far as I can tell, this is functioning correctly and still no path to actually reproduce the issue you're having locally has been provided per my request, so there isn't really any further action to take with this issue.",
    "reactions": {
      "url": "https://api.github.com/repos/expressjs/express/issues/comments/396797822/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/expressjs/express/issues/comments/396797891",
    "html_url": "https://github.com/expressjs/express/issues/3669#issuecomment-396797891",
    "issue_url": "https://api.github.com/repos/expressjs/express/issues/3669",
    "id": 396797891,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5Njc5Nzg5MQ==",
    "user": {
      "login": "canterberry",
      "id": 4053794,
      "node_id": "MDQ6VXNlcjQwNTM3OTQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4053794?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/canterberry",
      "html_url": "https://github.com/canterberry",
      "followers_url": "https://api.github.com/users/canterberry/followers",
      "following_url": "https://api.github.com/users/canterberry/following{/other_user}",
      "gists_url": "https://api.github.com/users/canterberry/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/canterberry/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/canterberry/subscriptions",
      "organizations_url": "https://api.github.com/users/canterberry/orgs",
      "repos_url": "https://api.github.com/users/canterberry/repos",
      "events_url": "https://api.github.com/users/canterberry/events{/privacy}",
      "received_events_url": "https://api.github.com/users/canterberry/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-13T02:56:27Z",
    "updated_at": "2018-06-13T02:56:27Z",
    "author_association": "NONE",
    "body": "@wesleytodd Thanks for that link. This explains the issue. The behavior appears to be by design (in this case, there is indeed no request body; the `Content-Type` header, in this case, was being provided along with GET and DELETE requests.",
    "reactions": {
      "url": "https://api.github.com/repos/expressjs/express/issues/comments/396797891/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/expressjs/express/issues/comments/396798050",
    "html_url": "https://github.com/expressjs/express/issues/3669#issuecomment-396798050",
    "issue_url": "https://api.github.com/repos/expressjs/express/issues/3669",
    "id": 396798050,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5Njc5ODA1MA==",
    "user": {
      "login": "canterberry",
      "id": 4053794,
      "node_id": "MDQ6VXNlcjQwNTM3OTQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4053794?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/canterberry",
      "html_url": "https://github.com/canterberry",
      "followers_url": "https://api.github.com/users/canterberry/followers",
      "following_url": "https://api.github.com/users/canterberry/following{/other_user}",
      "gists_url": "https://api.github.com/users/canterberry/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/canterberry/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/canterberry/subscriptions",
      "organizations_url": "https://api.github.com/users/canterberry/orgs",
      "repos_url": "https://api.github.com/users/canterberry/repos",
      "events_url": "https://api.github.com/users/canterberry/events{/privacy}",
      "received_events_url": "https://api.github.com/users/canterberry/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-13T02:57:40Z",
    "updated_at": "2018-06-13T02:57:40Z",
    "author_association": "NONE",
    "body": "@dougwilson I'll move this to the documentation repo. Thanks for your kind and friendly demeanor.",
    "reactions": {
      "url": "https://api.github.com/repos/expressjs/express/issues/comments/396798050/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
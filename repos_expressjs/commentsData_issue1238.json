[
  {
    "url": "https://api.github.com/repos/expressjs/express/issues/comments/7154807",
    "html_url": "https://github.com/expressjs/express/issues/1238#issuecomment-7154807",
    "issue_url": "https://api.github.com/repos/expressjs/express/issues/1238",
    "id": 7154807,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcxNTQ4MDc=",
    "user": {
      "login": "tj",
      "id": 25254,
      "node_id": "MDQ6VXNlcjI1MjU0",
      "avatar_url": "https://avatars.githubusercontent.com/u/25254?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tj",
      "html_url": "https://github.com/tj",
      "followers_url": "https://api.github.com/users/tj/followers",
      "following_url": "https://api.github.com/users/tj/following{/other_user}",
      "gists_url": "https://api.github.com/users/tj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tj/subscriptions",
      "organizations_url": "https://api.github.com/users/tj/orgs",
      "repos_url": "https://api.github.com/users/tj/repos",
      "events_url": "https://api.github.com/users/tj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tj/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-07-21T17:34:48Z",
    "updated_at": "2012-07-21T17:34:48Z",
    "author_association": "MEMBER",
    "body": "make sure that you defined that middleware near the top (anywhere above app.router) so that it's invoked before the routes, and make sure to call `done()`\n",
    "reactions": {
      "url": "https://api.github.com/repos/expressjs/express/issues/comments/7154807/reactions",
      "total_count": 5,
      "+1": 5,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/expressjs/express/issues/comments/7157943",
    "html_url": "https://github.com/expressjs/express/issues/1238#issuecomment-7157943",
    "issue_url": "https://api.github.com/repos/expressjs/express/issues/1238",
    "id": 7157943,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcxNTc5NDM=",
    "user": {
      "login": "scarvell",
      "id": 1268862,
      "node_id": "MDQ6VXNlcjEyNjg4NjI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1268862?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/scarvell",
      "html_url": "https://github.com/scarvell",
      "followers_url": "https://api.github.com/users/scarvell/followers",
      "following_url": "https://api.github.com/users/scarvell/following{/other_user}",
      "gists_url": "https://api.github.com/users/scarvell/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/scarvell/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/scarvell/subscriptions",
      "organizations_url": "https://api.github.com/users/scarvell/orgs",
      "repos_url": "https://api.github.com/users/scarvell/repos",
      "events_url": "https://api.github.com/users/scarvell/events{/privacy}",
      "received_events_url": "https://api.github.com/users/scarvell/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-07-22T00:48:50Z",
    "updated_at": "2012-07-22T00:48:50Z",
    "author_association": "NONE",
    "body": "The positioning of it fixed it! :) Thanks TJ\n",
    "reactions": {
      "url": "https://api.github.com/repos/expressjs/express/issues/comments/7157943/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/expressjs/express/issues/comments/7160630",
    "html_url": "https://github.com/expressjs/express/issues/1238#issuecomment-7160630",
    "issue_url": "https://api.github.com/repos/expressjs/express/issues/1238",
    "id": 7160630,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcxNjA2MzA=",
    "user": {
      "login": "ForbesLindesay",
      "id": 1260646,
      "node_id": "MDQ6VXNlcjEyNjA2NDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1260646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ForbesLindesay",
      "html_url": "https://github.com/ForbesLindesay",
      "followers_url": "https://api.github.com/users/ForbesLindesay/followers",
      "following_url": "https://api.github.com/users/ForbesLindesay/following{/other_user}",
      "gists_url": "https://api.github.com/users/ForbesLindesay/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ForbesLindesay/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ForbesLindesay/subscriptions",
      "organizations_url": "https://api.github.com/users/ForbesLindesay/orgs",
      "repos_url": "https://api.github.com/users/ForbesLindesay/repos",
      "events_url": "https://api.github.com/users/ForbesLindesay/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ForbesLindesay/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-07-22T11:30:56Z",
    "updated_at": "2012-07-22T11:30:56Z",
    "author_association": "CONTRIBUTOR",
    "body": "I've got a very similar issue, and it's not behaving as I would expect\n\n``` javascript\n//Load Express\nvar express = require('express');\nvar app = express.createServer();\n\n//Configure View\nvar cons = require('consolidate');\napp.engine('html', cons.ejs);\napp.set('view engine', 'html');\napp.set('views', __dirname + '/views');\n\n//Render '/'\napp.get('/', function (req, res) {\n    res.render('home');\n});\n//Add Local\napp.use(function (req, res, next) {\n    res.locals.message = 'Hello World';\n});\n\napp.listen(8080);\n```\n\nThe thing to note is that `app.use` is after `app.get` and this causes the exception in the view\n\n```\nReferenceError: C:\\github\\temp\\views\\home.html:1\n >> 1| <%- message %>\n\nmessage is not defined\n```\n\nSince I never have `app.use(app.router)`, the router should be the last thing to be added?  Even if I manually add app.router at the end, I get the same problem?\n",
    "reactions": {
      "url": "https://api.github.com/repos/expressjs/express/issues/comments/7160630/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/expressjs/express/issues/comments/7164764",
    "html_url": "https://github.com/expressjs/express/issues/1238#issuecomment-7164764",
    "issue_url": "https://api.github.com/repos/expressjs/express/issues/1238",
    "id": 7164764,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcxNjQ3NjQ=",
    "user": {
      "login": "tj",
      "id": 25254,
      "node_id": "MDQ6VXNlcjI1MjU0",
      "avatar_url": "https://avatars.githubusercontent.com/u/25254?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tj",
      "html_url": "https://github.com/tj",
      "followers_url": "https://api.github.com/users/tj/followers",
      "following_url": "https://api.github.com/users/tj/following{/other_user}",
      "gists_url": "https://api.github.com/users/tj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tj/subscriptions",
      "organizations_url": "https://api.github.com/users/tj/orgs",
      "repos_url": "https://api.github.com/users/tj/repos",
      "events_url": "https://api.github.com/users/tj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tj/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-07-22T19:37:56Z",
    "updated_at": "2012-07-22T19:37:56Z",
    "author_association": "MEMBER",
    "body": "if you dont explicitly .use(app.router) the first call to app.VERB() will use() it, so that's why you're seeing your locals.message one mounted _below_ app.router. It's a little obscure I know but I'll make sure this is well documented this time around\n",
    "reactions": {
      "url": "https://api.github.com/repos/expressjs/express/issues/comments/7164764/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/expressjs/express/issues/comments/7164767",
    "html_url": "https://github.com/expressjs/express/issues/1238#issuecomment-7164767",
    "issue_url": "https://api.github.com/repos/expressjs/express/issues/1238",
    "id": 7164767,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcxNjQ3Njc=",
    "user": {
      "login": "tj",
      "id": 25254,
      "node_id": "MDQ6VXNlcjI1MjU0",
      "avatar_url": "https://avatars.githubusercontent.com/u/25254?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tj",
      "html_url": "https://github.com/tj",
      "followers_url": "https://api.github.com/users/tj/followers",
      "following_url": "https://api.github.com/users/tj/following{/other_user}",
      "gists_url": "https://api.github.com/users/tj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tj/subscriptions",
      "organizations_url": "https://api.github.com/users/tj/orgs",
      "repos_url": "https://api.github.com/users/tj/repos",
      "events_url": "https://api.github.com/users/tj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tj/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-07-22T19:38:20Z",
    "updated_at": "2012-07-22T19:38:20Z",
    "author_association": "MEMBER",
    "body": "the alternative would be that we force app.use(app.router) in every app but that could cause other problems\n",
    "reactions": {
      "url": "https://api.github.com/repos/expressjs/express/issues/comments/7164767/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/expressjs/express/issues/comments/7165267",
    "html_url": "https://github.com/expressjs/express/issues/1238#issuecomment-7165267",
    "issue_url": "https://api.github.com/repos/expressjs/express/issues/1238",
    "id": 7165267,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcxNjUyNjc=",
    "user": {
      "login": "ForbesLindesay",
      "id": 1260646,
      "node_id": "MDQ6VXNlcjEyNjA2NDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1260646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ForbesLindesay",
      "html_url": "https://github.com/ForbesLindesay",
      "followers_url": "https://api.github.com/users/ForbesLindesay/followers",
      "following_url": "https://api.github.com/users/ForbesLindesay/following{/other_user}",
      "gists_url": "https://api.github.com/users/ForbesLindesay/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ForbesLindesay/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ForbesLindesay/subscriptions",
      "organizations_url": "https://api.github.com/users/ForbesLindesay/orgs",
      "repos_url": "https://api.github.com/users/ForbesLindesay/repos",
      "events_url": "https://api.github.com/users/ForbesLindesay/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ForbesLindesay/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-07-22T20:25:11Z",
    "updated_at": "2012-07-22T20:25:11Z",
    "author_association": "CONTRIBUTOR",
    "body": "The problem is that even if I choose to manually add `app.use(app.router)` to the end of my application, it still get's added as soon as the first verb is used.\n",
    "reactions": {
      "url": "https://api.github.com/repos/expressjs/express/issues/comments/7165267/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/expressjs/express/issues/comments/7165277",
    "html_url": "https://github.com/expressjs/express/issues/1238#issuecomment-7165277",
    "issue_url": "https://api.github.com/repos/expressjs/express/issues/1238",
    "id": 7165277,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcxNjUyNzc=",
    "user": {
      "login": "tj",
      "id": 25254,
      "node_id": "MDQ6VXNlcjI1MjU0",
      "avatar_url": "https://avatars.githubusercontent.com/u/25254?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tj",
      "html_url": "https://github.com/tj",
      "followers_url": "https://api.github.com/users/tj/followers",
      "following_url": "https://api.github.com/users/tj/following{/other_user}",
      "gists_url": "https://api.github.com/users/tj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tj/subscriptions",
      "organizations_url": "https://api.github.com/users/tj/orgs",
      "repos_url": "https://api.github.com/users/tj/repos",
      "events_url": "https://api.github.com/users/tj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tj/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-07-22T20:26:24Z",
    "updated_at": "2012-07-22T20:26:33Z",
    "author_association": "MEMBER",
    "body": "yeah, that's because app.use(app.router) hasn't happened yet, which is natural as far as statement execution goes, precedence definitely matters here\n",
    "reactions": {
      "url": "https://api.github.com/repos/expressjs/express/issues/comments/7165277/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/expressjs/express/issues/comments/7165374",
    "html_url": "https://github.com/expressjs/express/issues/1238#issuecomment-7165374",
    "issue_url": "https://api.github.com/repos/expressjs/express/issues/1238",
    "id": 7165374,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcxNjUzNzQ=",
    "user": {
      "login": "ForbesLindesay",
      "id": 1260646,
      "node_id": "MDQ6VXNlcjEyNjA2NDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1260646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ForbesLindesay",
      "html_url": "https://github.com/ForbesLindesay",
      "followers_url": "https://api.github.com/users/ForbesLindesay/followers",
      "following_url": "https://api.github.com/users/ForbesLindesay/following{/other_user}",
      "gists_url": "https://api.github.com/users/ForbesLindesay/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ForbesLindesay/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ForbesLindesay/subscriptions",
      "organizations_url": "https://api.github.com/users/ForbesLindesay/orgs",
      "repos_url": "https://api.github.com/users/ForbesLindesay/repos",
      "events_url": "https://api.github.com/users/ForbesLindesay/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ForbesLindesay/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-07-22T20:38:11Z",
    "updated_at": "2012-07-22T20:38:11Z",
    "author_association": "CONTRIBUTOR",
    "body": "So as soon as you call a verb, it inserts the router?  Making subsequently inserting the router pointless?\n",
    "reactions": {
      "url": "https://api.github.com/repos/expressjs/express/issues/comments/7165374/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/expressjs/express/issues/comments/7165430",
    "html_url": "https://github.com/expressjs/express/issues/1238#issuecomment-7165430",
    "issue_url": "https://api.github.com/repos/expressjs/express/issues/1238",
    "id": 7165430,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcxNjU0MzA=",
    "user": {
      "login": "tj",
      "id": 25254,
      "node_id": "MDQ6VXNlcjI1MjU0",
      "avatar_url": "https://avatars.githubusercontent.com/u/25254?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tj",
      "html_url": "https://github.com/tj",
      "followers_url": "https://api.github.com/users/tj/followers",
      "following_url": "https://api.github.com/users/tj/following{/other_user}",
      "gists_url": "https://api.github.com/users/tj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tj/subscriptions",
      "organizations_url": "https://api.github.com/users/tj/orgs",
      "repos_url": "https://api.github.com/users/tj/repos",
      "events_url": "https://api.github.com/users/tj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tj/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-07-22T20:44:59Z",
    "updated_at": "2012-07-22T20:44:59Z",
    "author_association": "MEMBER",
    "body": "yup because it's already done that behind the scenes, technically you can .use() it as many times as you want but I cant think of any reason you would want the router several times haha, you could though\n",
    "reactions": {
      "url": "https://api.github.com/repos/expressjs/express/issues/comments/7165430/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/expressjs/express/issues/comments/7165462",
    "html_url": "https://github.com/expressjs/express/issues/1238#issuecomment-7165462",
    "issue_url": "https://api.github.com/repos/expressjs/express/issues/1238",
    "id": 7165462,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcxNjU0NjI=",
    "user": {
      "login": "ForbesLindesay",
      "id": 1260646,
      "node_id": "MDQ6VXNlcjEyNjA2NDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1260646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ForbesLindesay",
      "html_url": "https://github.com/ForbesLindesay",
      "followers_url": "https://api.github.com/users/ForbesLindesay/followers",
      "following_url": "https://api.github.com/users/ForbesLindesay/following{/other_user}",
      "gists_url": "https://api.github.com/users/ForbesLindesay/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ForbesLindesay/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ForbesLindesay/subscriptions",
      "organizations_url": "https://api.github.com/users/ForbesLindesay/orgs",
      "repos_url": "https://api.github.com/users/ForbesLindesay/repos",
      "events_url": "https://api.github.com/users/ForbesLindesay/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ForbesLindesay/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-07-22T20:47:19Z",
    "updated_at": "2012-07-22T20:47:19Z",
    "author_association": "CONTRIBUTOR",
    "body": "hmm, I guess I can live with this, but it's not the semantics I'd like.  I feel like either the router should be split up, so that you can have any series of verbs/middleware in any order (verbs would be just like any other middleware) or there should be a way to have complete control over when the router gets called.\n",
    "reactions": {
      "url": "https://api.github.com/repos/expressjs/express/issues/comments/7165462/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/expressjs/express/issues/comments/7165485",
    "html_url": "https://github.com/expressjs/express/issues/1238#issuecomment-7165485",
    "issue_url": "https://api.github.com/repos/expressjs/express/issues/1238",
    "id": 7165485,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcxNjU0ODU=",
    "user": {
      "login": "tj",
      "id": 25254,
      "node_id": "MDQ6VXNlcjI1MjU0",
      "avatar_url": "https://avatars.githubusercontent.com/u/25254?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tj",
      "html_url": "https://github.com/tj",
      "followers_url": "https://api.github.com/users/tj/followers",
      "following_url": "https://api.github.com/users/tj/following{/other_user}",
      "gists_url": "https://api.github.com/users/tj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tj/subscriptions",
      "organizations_url": "https://api.github.com/users/tj/orgs",
      "repos_url": "https://api.github.com/users/tj/repos",
      "events_url": "https://api.github.com/users/tj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tj/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-07-22T20:50:00Z",
    "updated_at": "2012-07-22T20:50:00Z",
    "author_association": "MEMBER",
    "body": "the thing is .use() is effectively just a `.push()` to an array, which is very flexible, though yes you have to keep precedence in mind. I have a branch where each .VERB() call produce its own middleware, which is fundamentally more elegant but it is quite a bit slower\n",
    "reactions": {
      "url": "https://api.github.com/repos/expressjs/express/issues/comments/7165485/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/expressjs/express/issues/comments/7165561",
    "html_url": "https://github.com/expressjs/express/issues/1238#issuecomment-7165561",
    "issue_url": "https://api.github.com/repos/expressjs/express/issues/1238",
    "id": 7165561,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcxNjU1NjE=",
    "user": {
      "login": "ForbesLindesay",
      "id": 1260646,
      "node_id": "MDQ6VXNlcjEyNjA2NDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1260646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ForbesLindesay",
      "html_url": "https://github.com/ForbesLindesay",
      "followers_url": "https://api.github.com/users/ForbesLindesay/followers",
      "following_url": "https://api.github.com/users/ForbesLindesay/following{/other_user}",
      "gists_url": "https://api.github.com/users/ForbesLindesay/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ForbesLindesay/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ForbesLindesay/subscriptions",
      "organizations_url": "https://api.github.com/users/ForbesLindesay/orgs",
      "repos_url": "https://api.github.com/users/ForbesLindesay/repos",
      "events_url": "https://api.github.com/users/ForbesLindesay/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ForbesLindesay/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-07-22T20:58:52Z",
    "updated_at": "2012-07-22T20:58:52Z",
    "author_association": "CONTRIBUTOR",
    "body": "Would it be possible for using `app.router` to remove any previous uses of `app.router` so each router could only be used exactly once?  This would only need to happen as the server started, which would minimise the performance cost.  Alternatively, the approach of each verb creating it's own middle ware could be used, but with a 'consolidate' stage once the server is completely defined, that way you could consolidate methods into routers in order to maintain performance?\n",
    "reactions": {
      "url": "https://api.github.com/repos/expressjs/express/issues/comments/7165561/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/expressjs/express/issues/comments/7165571",
    "html_url": "https://github.com/expressjs/express/issues/1238#issuecomment-7165571",
    "issue_url": "https://api.github.com/repos/expressjs/express/issues/1238",
    "id": 7165571,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcxNjU1NzE=",
    "user": {
      "login": "ForbesLindesay",
      "id": 1260646,
      "node_id": "MDQ6VXNlcjEyNjA2NDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1260646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ForbesLindesay",
      "html_url": "https://github.com/ForbesLindesay",
      "followers_url": "https://api.github.com/users/ForbesLindesay/followers",
      "following_url": "https://api.github.com/users/ForbesLindesay/following{/other_user}",
      "gists_url": "https://api.github.com/users/ForbesLindesay/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ForbesLindesay/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ForbesLindesay/subscriptions",
      "organizations_url": "https://api.github.com/users/ForbesLindesay/orgs",
      "repos_url": "https://api.github.com/users/ForbesLindesay/repos",
      "events_url": "https://api.github.com/users/ForbesLindesay/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ForbesLindesay/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-07-22T21:00:19Z",
    "updated_at": "2012-07-22T21:00:19Z",
    "author_association": "CONTRIBUTOR",
    "body": "the `locals.use` method actually solved this use case for me, since it let me define some middleware to be called before rendering views, regardless of where it was defined.  The reason I want to do that is to keep things in modules where functionally related things are in the same module.\n",
    "reactions": {
      "url": "https://api.github.com/repos/expressjs/express/issues/comments/7165571/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/expressjs/express/issues/comments/7165940",
    "html_url": "https://github.com/expressjs/express/issues/1238#issuecomment-7165940",
    "issue_url": "https://api.github.com/repos/expressjs/express/issues/1238",
    "id": 7165940,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcxNjU5NDA=",
    "user": {
      "login": "tj",
      "id": 25254,
      "node_id": "MDQ6VXNlcjI1MjU0",
      "avatar_url": "https://avatars.githubusercontent.com/u/25254?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tj",
      "html_url": "https://github.com/tj",
      "followers_url": "https://api.github.com/users/tj/followers",
      "following_url": "https://api.github.com/users/tj/following{/other_user}",
      "gists_url": "https://api.github.com/users/tj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tj/subscriptions",
      "organizations_url": "https://api.github.com/users/tj/orgs",
      "repos_url": "https://api.github.com/users/tj/repos",
      "events_url": "https://api.github.com/users/tj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tj/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-07-22T21:37:33Z",
    "updated_at": "2012-07-22T21:37:33Z",
    "author_association": "MEMBER",
    "body": "that would be a lot of beating around the bush just for a simple precedence issue, which is not really much of an issue, maybe a bit of a GOTCHA but however you're bootstrapping the app should easily be able to take care of this sort of thing. As far as manipulating the middleware stack on subsequent .use()es etc would violate the simplicity of middleware as they are currently, which have the simple rule of being called in order of definition, anything else would lead to more confusion. I think this just needs to be clearly documented since the auto-use() part here is a little magical\n",
    "reactions": {
      "url": "https://api.github.com/repos/expressjs/express/issues/comments/7165940/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/expressjs/express/issues/comments/7165998",
    "html_url": "https://github.com/expressjs/express/issues/1238#issuecomment-7165998",
    "issue_url": "https://api.github.com/repos/expressjs/express/issues/1238",
    "id": 7165998,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcxNjU5OTg=",
    "user": {
      "login": "ForbesLindesay",
      "id": 1260646,
      "node_id": "MDQ6VXNlcjEyNjA2NDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1260646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ForbesLindesay",
      "html_url": "https://github.com/ForbesLindesay",
      "followers_url": "https://api.github.com/users/ForbesLindesay/followers",
      "following_url": "https://api.github.com/users/ForbesLindesay/following{/other_user}",
      "gists_url": "https://api.github.com/users/ForbesLindesay/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ForbesLindesay/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ForbesLindesay/subscriptions",
      "organizations_url": "https://api.github.com/users/ForbesLindesay/orgs",
      "repos_url": "https://api.github.com/users/ForbesLindesay/repos",
      "events_url": "https://api.github.com/users/ForbesLindesay/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ForbesLindesay/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-07-22T21:43:32Z",
    "updated_at": "2012-07-22T21:43:32Z",
    "author_association": "CONTRIBUTOR",
    "body": "ok, I'll learn to live with it\n",
    "reactions": {
      "url": "https://api.github.com/repos/expressjs/express/issues/comments/7165998/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/expressjs/express/issues/comments/8146593",
    "html_url": "https://github.com/expressjs/express/issues/1238#issuecomment-8146593",
    "issue_url": "https://api.github.com/repos/expressjs/express/issues/1238",
    "id": 8146593,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgxNDY1OTM=",
    "user": {
      "login": "jhiraygit",
      "id": 1195124,
      "node_id": "MDQ6VXNlcjExOTUxMjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1195124?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jhiraygit",
      "html_url": "https://github.com/jhiraygit",
      "followers_url": "https://api.github.com/users/jhiraygit/followers",
      "following_url": "https://api.github.com/users/jhiraygit/following{/other_user}",
      "gists_url": "https://api.github.com/users/jhiraygit/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jhiraygit/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jhiraygit/subscriptions",
      "organizations_url": "https://api.github.com/users/jhiraygit/orgs",
      "repos_url": "https://api.github.com/users/jhiraygit/repos",
      "events_url": "https://api.github.com/users/jhiraygit/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jhiraygit/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-08-30T01:19:03Z",
    "updated_at": "2012-08-30T01:19:03Z",
    "author_association": "NONE",
    "body": "Hi Visionmedia,\n\nI have similar issue with express 3.0.0rc3. If I add app.use(app.router) at end my browser spins and home page does not load. Otherwise I get error message: 'message is not defined' while rendering page \n\napp.use(app.router);\n  app.use(function(req, res){\n    res.locals.message = 'good';\n      });\n\nI dont get error is I specified locals.message in jade template. Have spent lot of time troubleshooing.\nYour help is appreciated.\n\nThank you.\n",
    "reactions": {
      "url": "https://api.github.com/repos/expressjs/express/issues/comments/8146593/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/expressjs/express/issues/comments/8146700",
    "html_url": "https://github.com/expressjs/express/issues/1238#issuecomment-8146700",
    "issue_url": "https://api.github.com/repos/expressjs/express/issues/1238",
    "id": 8146700,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgxNDY3MDA=",
    "user": {
      "login": "jonathanong",
      "id": 643505,
      "node_id": "MDQ6VXNlcjY0MzUwNQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/643505?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonathanong",
      "html_url": "https://github.com/jonathanong",
      "followers_url": "https://api.github.com/users/jonathanong/followers",
      "following_url": "https://api.github.com/users/jonathanong/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonathanong/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonathanong/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonathanong/subscriptions",
      "organizations_url": "https://api.github.com/users/jonathanong/orgs",
      "repos_url": "https://api.github.com/users/jonathanong/repos",
      "events_url": "https://api.github.com/users/jonathanong/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonathanong/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-08-30T01:25:12Z",
    "updated_at": "2012-08-30T01:25:51Z",
    "author_association": "MEMBER",
    "body": "move `app.use(app.router)` below, and you need to call `next()`\n",
    "reactions": {
      "url": "https://api.github.com/repos/expressjs/express/issues/comments/8146700/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/expressjs/express/issues/comments/8146958",
    "html_url": "https://github.com/expressjs/express/issues/1238#issuecomment-8146958",
    "issue_url": "https://api.github.com/repos/expressjs/express/issues/1238",
    "id": 8146958,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgxNDY5NTg=",
    "user": {
      "login": "jhiraygit",
      "id": 1195124,
      "node_id": "MDQ6VXNlcjExOTUxMjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1195124?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jhiraygit",
      "html_url": "https://github.com/jhiraygit",
      "followers_url": "https://api.github.com/users/jhiraygit/followers",
      "following_url": "https://api.github.com/users/jhiraygit/following{/other_user}",
      "gists_url": "https://api.github.com/users/jhiraygit/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jhiraygit/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jhiraygit/subscriptions",
      "organizations_url": "https://api.github.com/users/jhiraygit/orgs",
      "repos_url": "https://api.github.com/users/jhiraygit/repos",
      "events_url": "https://api.github.com/users/jhiraygit/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jhiraygit/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-08-30T01:40:36Z",
    "updated_at": "2012-08-30T01:40:36Z",
    "author_association": "NONE",
    "body": "Thanks a lot  Jonathan it worked.\n\nadded next();\nand moved app.use(app.router) at end\n",
    "reactions": {
      "url": "https://api.github.com/repos/expressjs/express/issues/comments/8146958/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
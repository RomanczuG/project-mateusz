[
  {
    "url": "https://api.github.com/repos/expressjs/express/issues/comments/543861717",
    "html_url": "https://github.com/expressjs/express/issues/4080#issuecomment-543861717",
    "issue_url": "https://api.github.com/repos/expressjs/express/issues/4080",
    "id": 543861717,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU0Mzg2MTcxNw==",
    "user": {
      "login": "dougwilson",
      "id": 67512,
      "node_id": "MDQ6VXNlcjY3NTEy",
      "avatar_url": "https://avatars.githubusercontent.com/u/67512?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dougwilson",
      "html_url": "https://github.com/dougwilson",
      "followers_url": "https://api.github.com/users/dougwilson/followers",
      "following_url": "https://api.github.com/users/dougwilson/following{/other_user}",
      "gists_url": "https://api.github.com/users/dougwilson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dougwilson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dougwilson/subscriptions",
      "organizations_url": "https://api.github.com/users/dougwilson/orgs",
      "repos_url": "https://api.github.com/users/dougwilson/repos",
      "events_url": "https://api.github.com/users/dougwilson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dougwilson/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-10-18T17:56:41Z",
    "updated_at": "2019-10-18T17:56:41Z",
    "author_association": "MEMBER",
    "body": "Can you provide the exact version of things you are using and the step-by-step directions to get the behavior? I'm asking because I was unable to replicate. This is the commands I ran, which give the expected 404:\r\n```\r\n$ npm i express\r\n+ express@4.17.1\r\nadded 50 packages from 37 contributors and audited 126 packages in 2.658s\r\nfound 0 vulnerabilities\r\n\r\n$ node -e 'require(\"http\").createServer(require(\"express\")()).listen(3000)' &\r\n[1] 34705\r\n\r\n$ curl -i http://127.0.0.1:3000/scripts\r\nHTTP/1.1 404 Not Found\r\nContent-Security-Policy: default-src 'none'\r\nX-Content-Type-Options: nosniff\r\nContent-Type: text/html; charset=utf-8\r\nContent-Length: 146\r\nDate: Fri, 18 Oct 2019 17:54:47 GMT\r\nConnection: keep-alive\r\n\r\n<!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head>\r\n<meta charset=\"utf-8\">\r\n<title>Error</title>\r\n</head>\r\n<body>\r\n<pre>Cannot GET /scripts</pre>\r\n</body>\r\n</html>\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/expressjs/express/issues/comments/543861717/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/expressjs/express/issues/comments/543910389",
    "html_url": "https://github.com/expressjs/express/issues/4080#issuecomment-543910389",
    "issue_url": "https://api.github.com/repos/expressjs/express/issues/4080",
    "id": 543910389,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU0MzkxMDM4OQ==",
    "user": {
      "login": "repinvv",
      "id": 1575441,
      "node_id": "MDQ6VXNlcjE1NzU0NDE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1575441?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/repinvv",
      "html_url": "https://github.com/repinvv",
      "followers_url": "https://api.github.com/users/repinvv/followers",
      "following_url": "https://api.github.com/users/repinvv/following{/other_user}",
      "gists_url": "https://api.github.com/users/repinvv/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/repinvv/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/repinvv/subscriptions",
      "organizations_url": "https://api.github.com/users/repinvv/orgs",
      "repos_url": "https://api.github.com/users/repinvv/repos",
      "events_url": "https://api.github.com/users/repinvv/events{/privacy}",
      "received_events_url": "https://api.github.com/users/repinvv/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-10-18T19:49:01Z",
    "updated_at": "2019-10-18T19:49:01Z",
    "author_association": "NONE",
    "body": "I did not test that properly, sorry about that.\r\nit turns out browser cached that 301 response.\r\n\r\nTested in incognito mode and empty express does return 404.\r\ntried commenting/uncommenting lines and it turns out express.static causes that.\r\nhere is the actual code\r\n\r\n```\r\nconst setHeaders = (req, res) => {\r\n  res.set(\"Content-Security-Policy\",\r\n    \"script-src 'self'; img-src 'self'; connect-src 'self'; style-src 'unsafe-inline'; default-src 'none'; frame-ancestors 'none'\")\r\n}\r\nexport const app = express();\r\napp.use(\"/scripts\", express.static(\"build/bundle\", { setHeaders }));\r\nhttp.createServer(app).listen(80);\r\n```\r\n\r\nissue was reported after using OWASP ZAP scanner, it tries to get \"localhost/scripts\" url, receives the redirect and reports a vulnerability. \r\nVulnerability actually is not that there is 301 response, but missing \"frame-ancestors\" part in its \"Content-Security-Policy\".\r\n\r\nI am not sure if that 301 is a real security risk, but I need either server to respond 404 instead of it, \r\nor let it apply setHeaders on that 301.\r\n404 seems more reasonable\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/expressjs/express/issues/comments/543910389/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/expressjs/express/issues/comments/543921134",
    "html_url": "https://github.com/expressjs/express/issues/4080#issuecomment-543921134",
    "issue_url": "https://api.github.com/repos/expressjs/express/issues/4080",
    "id": 543921134,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU0MzkyMTEzNA==",
    "user": {
      "login": "dougwilson",
      "id": 67512,
      "node_id": "MDQ6VXNlcjY3NTEy",
      "avatar_url": "https://avatars.githubusercontent.com/u/67512?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dougwilson",
      "html_url": "https://github.com/dougwilson",
      "followers_url": "https://api.github.com/users/dougwilson/followers",
      "following_url": "https://api.github.com/users/dougwilson/following{/other_user}",
      "gists_url": "https://api.github.com/users/dougwilson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dougwilson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dougwilson/subscriptions",
      "organizations_url": "https://api.github.com/users/dougwilson/orgs",
      "repos_url": "https://api.github.com/users/dougwilson/repos",
      "events_url": "https://api.github.com/users/dougwilson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dougwilson/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-10-18T20:14:29Z",
    "updated_at": "2019-10-18T20:14:29Z",
    "author_association": "MEMBER",
    "body": "Add `redirect: false` to your express.static options to turn off the redirect behavior :+1:",
    "reactions": {
      "url": "https://api.github.com/repos/expressjs/express/issues/comments/543921134/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/expressjs/express/issues/comments/543945245",
    "html_url": "https://github.com/expressjs/express/issues/4080#issuecomment-543945245",
    "issue_url": "https://api.github.com/repos/expressjs/express/issues/4080",
    "id": 543945245,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU0Mzk0NTI0NQ==",
    "user": {
      "login": "repinvv",
      "id": 1575441,
      "node_id": "MDQ6VXNlcjE1NzU0NDE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1575441?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/repinvv",
      "html_url": "https://github.com/repinvv",
      "followers_url": "https://api.github.com/users/repinvv/followers",
      "following_url": "https://api.github.com/users/repinvv/following{/other_user}",
      "gists_url": "https://api.github.com/users/repinvv/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/repinvv/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/repinvv/subscriptions",
      "organizations_url": "https://api.github.com/users/repinvv/orgs",
      "repos_url": "https://api.github.com/users/repinvv/repos",
      "events_url": "https://api.github.com/users/repinvv/events{/privacy}",
      "received_events_url": "https://api.github.com/users/repinvv/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-10-18T21:03:58Z",
    "updated_at": "2019-10-18T21:03:58Z",
    "author_association": "NONE",
    "body": "With this flag it passes the control to the next app.use() in the chain.\r\nThank you very much. Solved it for me.",
    "reactions": {
      "url": "https://api.github.com/repos/expressjs/express/issues/comments/543945245/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
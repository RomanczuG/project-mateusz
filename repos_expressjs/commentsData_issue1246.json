[
  {
    "url": "https://api.github.com/repos/expressjs/express/issues/comments/7253447",
    "html_url": "https://github.com/expressjs/express/issues/1246#issuecomment-7253447",
    "issue_url": "https://api.github.com/repos/expressjs/express/issues/1246",
    "id": 7253447,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcyNTM0NDc=",
    "user": {
      "login": "tj",
      "id": 25254,
      "node_id": "MDQ6VXNlcjI1MjU0",
      "avatar_url": "https://avatars.githubusercontent.com/u/25254?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tj",
      "html_url": "https://github.com/tj",
      "followers_url": "https://api.github.com/users/tj/followers",
      "following_url": "https://api.github.com/users/tj/following{/other_user}",
      "gists_url": "https://api.github.com/users/tj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tj/subscriptions",
      "organizations_url": "https://api.github.com/users/tj/orgs",
      "repos_url": "https://api.github.com/users/tj/repos",
      "events_url": "https://api.github.com/users/tj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tj/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-07-25T16:10:34Z",
    "updated_at": "2012-07-25T16:10:34Z",
    "author_association": "MEMBER",
    "body": "yup, we're using schema-relative redirects now, it should simplify some of the previous proxy stuff\n",
    "reactions": {
      "url": "https://api.github.com/repos/expressjs/express/issues/comments/7253447/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/expressjs/express/issues/comments/7256016",
    "html_url": "https://github.com/expressjs/express/issues/1246#issuecomment-7256016",
    "issue_url": "https://api.github.com/repos/expressjs/express/issues/1246",
    "id": 7256016,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcyNTYwMTY=",
    "user": {
      "login": "davidrios",
      "id": 1418372,
      "node_id": "MDQ6VXNlcjE0MTgzNzI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1418372?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/davidrios",
      "html_url": "https://github.com/davidrios",
      "followers_url": "https://api.github.com/users/davidrios/followers",
      "following_url": "https://api.github.com/users/davidrios/following{/other_user}",
      "gists_url": "https://api.github.com/users/davidrios/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/davidrios/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/davidrios/subscriptions",
      "organizations_url": "https://api.github.com/users/davidrios/orgs",
      "repos_url": "https://api.github.com/users/davidrios/repos",
      "events_url": "https://api.github.com/users/davidrios/events{/privacy}",
      "received_events_url": "https://api.github.com/users/davidrios/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-07-25T17:41:19Z",
    "updated_at": "2012-07-25T17:41:19Z",
    "author_association": "NONE",
    "body": "I see, that's related to the '//' feature right? So, suppose I have a node instance running at localhost:3000, this instance is behind nginx running at somehost:80, the user then tries to access an authentication-restricted content, seeing that he is is not logged in, the express app redirect him to say '/login'. Up until RC1 all I had to do was to issue redirect('/login') and the user would end up in 'somehost:80/login', now if I do just that the user end up in 'localhost:3000/login' which is obviously not the intended destination. What do I have to do so that express pick up the correct host and port from the front-facing proxy?\n",
    "reactions": {
      "url": "https://api.github.com/repos/expressjs/express/issues/comments/7256016/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/expressjs/express/issues/comments/7259277",
    "html_url": "https://github.com/expressjs/express/issues/1246#issuecomment-7259277",
    "issue_url": "https://api.github.com/repos/expressjs/express/issues/1246",
    "id": 7259277,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcyNTkyNzc=",
    "user": {
      "login": "tj",
      "id": 25254,
      "node_id": "MDQ6VXNlcjI1MjU0",
      "avatar_url": "https://avatars.githubusercontent.com/u/25254?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tj",
      "html_url": "https://github.com/tj",
      "followers_url": "https://api.github.com/users/tj/followers",
      "following_url": "https://api.github.com/users/tj/following{/other_user}",
      "gists_url": "https://api.github.com/users/tj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tj/subscriptions",
      "organizations_url": "https://api.github.com/users/tj/orgs",
      "repos_url": "https://api.github.com/users/tj/repos",
      "events_url": "https://api.github.com/users/tj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tj/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-07-25T19:27:42Z",
    "updated_at": "2012-07-25T19:27:42Z",
    "author_association": "MEMBER",
    "body": "perhaps nginx is not forwarding the Host header field correctly?\n\n``` js\n    var host = req.get('Host');\n    url = '//' + host + url;\n```\n\nis the code there, nothing fancy so it should just retain the http / https from the browser but keep you on the same host\n",
    "reactions": {
      "url": "https://api.github.com/repos/expressjs/express/issues/comments/7259277/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/expressjs/express/issues/comments/7261256",
    "html_url": "https://github.com/expressjs/express/issues/1246#issuecomment-7261256",
    "issue_url": "https://api.github.com/repos/expressjs/express/issues/1246",
    "id": 7261256,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcyNjEyNTY=",
    "user": {
      "login": "davidrios",
      "id": 1418372,
      "node_id": "MDQ6VXNlcjE0MTgzNzI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1418372?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/davidrios",
      "html_url": "https://github.com/davidrios",
      "followers_url": "https://api.github.com/users/davidrios/followers",
      "following_url": "https://api.github.com/users/davidrios/following{/other_user}",
      "gists_url": "https://api.github.com/users/davidrios/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/davidrios/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/davidrios/subscriptions",
      "organizations_url": "https://api.github.com/users/davidrios/orgs",
      "repos_url": "https://api.github.com/users/davidrios/repos",
      "events_url": "https://api.github.com/users/davidrios/events{/privacy}",
      "received_events_url": "https://api.github.com/users/davidrios/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-07-25T20:36:23Z",
    "updated_at": "2012-07-25T20:36:23Z",
    "author_association": "NONE",
    "body": "You are right, nginx wasn't sending the `Host` header, but that's because I was under the impression that the headers used in this case were `X-Forwarded-Host` and `X-Forwarded-Port`, which nginx was configured to send. What do you think?\n",
    "reactions": {
      "url": "https://api.github.com/repos/expressjs/express/issues/comments/7261256/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/expressjs/express/issues/comments/7261635",
    "html_url": "https://github.com/expressjs/express/issues/1246#issuecomment-7261635",
    "issue_url": "https://api.github.com/repos/expressjs/express/issues/1246",
    "id": 7261635,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcyNjE2MzU=",
    "user": {
      "login": "tj",
      "id": 25254,
      "node_id": "MDQ6VXNlcjI1MjU0",
      "avatar_url": "https://avatars.githubusercontent.com/u/25254?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tj",
      "html_url": "https://github.com/tj",
      "followers_url": "https://api.github.com/users/tj/followers",
      "following_url": "https://api.github.com/users/tj/following{/other_user}",
      "gists_url": "https://api.github.com/users/tj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tj/subscriptions",
      "organizations_url": "https://api.github.com/users/tj/orgs",
      "repos_url": "https://api.github.com/users/tj/repos",
      "events_url": "https://api.github.com/users/tj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tj/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-07-25T20:49:15Z",
    "updated_at": "2012-07-25T20:49:15Z",
    "author_association": "MEMBER",
    "body": "iirc the spec specifies that Host must be untouched by the reverse proxies, and should be fine, representing your :80 there\n",
    "reactions": {
      "url": "https://api.github.com/repos/expressjs/express/issues/comments/7261635/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/expressjs/express/issues/comments/7262406",
    "html_url": "https://github.com/expressjs/express/issues/1246#issuecomment-7262406",
    "issue_url": "https://api.github.com/repos/expressjs/express/issues/1246",
    "id": 7262406,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcyNjI0MDY=",
    "user": {
      "login": "davidrios",
      "id": 1418372,
      "node_id": "MDQ6VXNlcjE0MTgzNzI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1418372?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/davidrios",
      "html_url": "https://github.com/davidrios",
      "followers_url": "https://api.github.com/users/davidrios/followers",
      "following_url": "https://api.github.com/users/davidrios/following{/other_user}",
      "gists_url": "https://api.github.com/users/davidrios/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/davidrios/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/davidrios/subscriptions",
      "organizations_url": "https://api.github.com/users/davidrios/orgs",
      "repos_url": "https://api.github.com/users/davidrios/repos",
      "events_url": "https://api.github.com/users/davidrios/events{/privacy}",
      "received_events_url": "https://api.github.com/users/davidrios/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-07-25T21:15:39Z",
    "updated_at": "2012-07-25T21:15:39Z",
    "author_association": "NONE",
    "body": "I guess that clears it up, thank you very much!\n",
    "reactions": {
      "url": "https://api.github.com/repos/expressjs/express/issues/comments/7262406/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
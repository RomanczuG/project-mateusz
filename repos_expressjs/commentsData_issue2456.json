[
  {
    "url": "https://api.github.com/repos/expressjs/express/issues/comments/65106344",
    "html_url": "https://github.com/expressjs/express/issues/2456#issuecomment-65106344",
    "issue_url": "https://api.github.com/repos/expressjs/express/issues/2456",
    "id": 65106344,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY1MTA2MzQ0",
    "user": {
      "login": "dougwilson",
      "id": 67512,
      "node_id": "MDQ6VXNlcjY3NTEy",
      "avatar_url": "https://avatars.githubusercontent.com/u/67512?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dougwilson",
      "html_url": "https://github.com/dougwilson",
      "followers_url": "https://api.github.com/users/dougwilson/followers",
      "following_url": "https://api.github.com/users/dougwilson/following{/other_user}",
      "gists_url": "https://api.github.com/users/dougwilson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dougwilson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dougwilson/subscriptions",
      "organizations_url": "https://api.github.com/users/dougwilson/orgs",
      "repos_url": "https://api.github.com/users/dougwilson/repos",
      "events_url": "https://api.github.com/users/dougwilson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dougwilson/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-12-01T17:58:52Z",
    "updated_at": "2014-12-01T17:58:52Z",
    "author_association": "MEMBER",
    "body": "Hi! You'll want to use the `on-headers` in combination with `type-is` for this: https://github.com/jshttp/on-headers\n\nExample for your use-case:\n\n``` js\nvar express = require('express')\nvar onHeaders = require('on-headers')\nvar typeIs = require('type-is')\n\nvar app = express()\n\n// ... stuff\n\napp.use(function (req, res, next) {\n  onHeaders(res, setCacheControl)\n  next()\n})\n\n// ... routes\n\nfunction setCacheControl() {\n  var isHTML = typeIs(this, 'html')\n  var age = isHTML\n    ? 1200\n    : 60\n  this.setHeader('Cache-Control', 'public, max-age=' + age)\n}\n```\n",
    "reactions": {
      "url": "https://api.github.com/repos/expressjs/express/issues/comments/65106344/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/expressjs/express/issues/comments/65175341",
    "html_url": "https://github.com/expressjs/express/issues/2456#issuecomment-65175341",
    "issue_url": "https://api.github.com/repos/expressjs/express/issues/2456",
    "id": 65175341,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY1MTc1MzQx",
    "user": {
      "login": "lmk123",
      "id": 5035625,
      "node_id": "MDQ6VXNlcjUwMzU2MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5035625?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lmk123",
      "html_url": "https://github.com/lmk123",
      "followers_url": "https://api.github.com/users/lmk123/followers",
      "following_url": "https://api.github.com/users/lmk123/following{/other_user}",
      "gists_url": "https://api.github.com/users/lmk123/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lmk123/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lmk123/subscriptions",
      "organizations_url": "https://api.github.com/users/lmk123/orgs",
      "repos_url": "https://api.github.com/users/lmk123/repos",
      "events_url": "https://api.github.com/users/lmk123/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lmk123/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-12-02T02:40:54Z",
    "updated_at": "2014-12-02T02:40:54Z",
    "author_association": "NONE",
    "body": "Thanks! :)\n",
    "reactions": {
      "url": "https://api.github.com/repos/expressjs/express/issues/comments/65175341/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/expressjs/express/issues/comments/65536359",
    "html_url": "https://github.com/expressjs/express/issues/2456#issuecomment-65536359",
    "issue_url": "https://api.github.com/repos/expressjs/express/issues/2456",
    "id": 65536359,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY1NTM2MzU5",
    "user": {
      "login": "lmk123",
      "id": 5035625,
      "node_id": "MDQ6VXNlcjUwMzU2MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5035625?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lmk123",
      "html_url": "https://github.com/lmk123",
      "followers_url": "https://api.github.com/users/lmk123/followers",
      "following_url": "https://api.github.com/users/lmk123/following{/other_user}",
      "gists_url": "https://api.github.com/users/lmk123/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lmk123/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lmk123/subscriptions",
      "organizations_url": "https://api.github.com/users/lmk123/orgs",
      "repos_url": "https://api.github.com/users/lmk123/repos",
      "events_url": "https://api.github.com/users/lmk123/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lmk123/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-12-04T04:29:19Z",
    "updated_at": "2014-12-04T04:29:19Z",
    "author_association": "NONE",
    "body": "An error occur when I use `typeIs(this, 'html')`:\n\n```\nTypeError: Cannot use 'in' operator to search for 'transfer-encoding' in undefined\n    at hasbody (\\node_modules\\type-is\\index.js:74:30)\n    at typeofrequest (\\node_modules\\type-is\\index.js:108:8)\n```\n\nI know it is not related to `express` but `type-is`, because I think `type-is` only work for request.\n\nAnd now I try to do this:\n\n``` js\nonHeaders(res, function () {\n    var contentType = this.get( 'content-type' );\n    if ( contentType && contentType.indexOf( 'text/html' ) >= 0 ) {\n        // I want to set Cache-Control no matter the status is 200 or 304\n        this.set( { 'Cache-Control' , 'public, max-age=60' } );\n    }\n});\n```\n\nIt works good ,**but** when server response a HTTP 304 status, the `contentType` will be `undefined`.\n",
    "reactions": {
      "url": "https://api.github.com/repos/expressjs/express/issues/comments/65536359/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/expressjs/express/issues/comments/65536906",
    "html_url": "https://github.com/expressjs/express/issues/2456#issuecomment-65536906",
    "issue_url": "https://api.github.com/repos/expressjs/express/issues/2456",
    "id": 65536906,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY1NTM2OTA2",
    "user": {
      "login": "dougwilson",
      "id": 67512,
      "node_id": "MDQ6VXNlcjY3NTEy",
      "avatar_url": "https://avatars.githubusercontent.com/u/67512?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dougwilson",
      "html_url": "https://github.com/dougwilson",
      "followers_url": "https://api.github.com/users/dougwilson/followers",
      "following_url": "https://api.github.com/users/dougwilson/following{/other_user}",
      "gists_url": "https://api.github.com/users/dougwilson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dougwilson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dougwilson/subscriptions",
      "organizations_url": "https://api.github.com/users/dougwilson/orgs",
      "repos_url": "https://api.github.com/users/dougwilson/repos",
      "events_url": "https://api.github.com/users/dougwilson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dougwilson/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-12-04T04:38:05Z",
    "updated_at": "2014-12-04T04:38:05Z",
    "author_association": "MEMBER",
    "body": "> An error occur when I use typeIs(this, 'html'):\n\nOh, oops. I definitely need to fix that :) For now, you should be able to work-around it using `typeIs({headers: this._headers}, 'html')`--I don't want to recommend trying to look inside `Content-Type` header yourself, mainly because it can be error prone, especially if someone sets it to `TEXT/HTML`, for example.\n\n> It works good ,but when server response a HTTP 304 status, the contentType will be undefined.\n\nHm. There is no good way around this, because the HTTP spec itself does not allow you to send the `Content-Type` and related headers in a 304 response, so the header won't be there to check for a 304.\n",
    "reactions": {
      "url": "https://api.github.com/repos/expressjs/express/issues/comments/65536906/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/expressjs/express/issues/comments/65538400",
    "html_url": "https://github.com/expressjs/express/issues/2456#issuecomment-65538400",
    "issue_url": "https://api.github.com/repos/expressjs/express/issues/2456",
    "id": 65538400,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY1NTM4NDAw",
    "user": {
      "login": "lmk123",
      "id": 5035625,
      "node_id": "MDQ6VXNlcjUwMzU2MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5035625?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lmk123",
      "html_url": "https://github.com/lmk123",
      "followers_url": "https://api.github.com/users/lmk123/followers",
      "following_url": "https://api.github.com/users/lmk123/following{/other_user}",
      "gists_url": "https://api.github.com/users/lmk123/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lmk123/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lmk123/subscriptions",
      "organizations_url": "https://api.github.com/users/lmk123/orgs",
      "repos_url": "https://api.github.com/users/lmk123/repos",
      "events_url": "https://api.github.com/users/lmk123/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lmk123/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-12-04T05:03:15Z",
    "updated_at": "2014-12-04T05:03:15Z",
    "author_association": "NONE",
    "body": "Thanks for your reply :) I will try other ways to do that.\n",
    "reactions": {
      "url": "https://api.github.com/repos/expressjs/express/issues/comments/65538400/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
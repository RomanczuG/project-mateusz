[
  {
    "url": "https://api.github.com/repos/expressjs/express/issues/comments/496076823",
    "html_url": "https://github.com/expressjs/express/issues/3969#issuecomment-496076823",
    "issue_url": "https://api.github.com/repos/expressjs/express/issues/3969",
    "id": 496076823,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ5NjA3NjgyMw==",
    "user": {
      "login": "dougwilson",
      "id": 67512,
      "node_id": "MDQ6VXNlcjY3NTEy",
      "avatar_url": "https://avatars.githubusercontent.com/u/67512?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dougwilson",
      "html_url": "https://github.com/dougwilson",
      "followers_url": "https://api.github.com/users/dougwilson/followers",
      "following_url": "https://api.github.com/users/dougwilson/following{/other_user}",
      "gists_url": "https://api.github.com/users/dougwilson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dougwilson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dougwilson/subscriptions",
      "organizations_url": "https://api.github.com/users/dougwilson/orgs",
      "repos_url": "https://api.github.com/users/dougwilson/repos",
      "events_url": "https://api.github.com/users/dougwilson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dougwilson/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-05-27T04:53:28Z",
    "updated_at": "2019-05-27T04:53:28Z",
    "author_association": "MEMBER",
    "body": "When an array is passed to `app.use`, it is simply flattened out into the equivalent of multiple `app.use` calls. Our tests for this behavior are still passing, so I'm not sure why it wouldn't work for your case. Can you help provide a reproduction app that we can run and see the issue demonstrated to take a look? The following would be ideal to get:\r\n\r\n1. Version of Node.js\r\n2. Version of Express.js\r\n3. Complete source code that demonstrates the issue we can run without modification.",
    "reactions": {
      "url": "https://api.github.com/repos/expressjs/express/issues/comments/496076823/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/expressjs/express/issues/comments/496344977",
    "html_url": "https://github.com/expressjs/express/issues/3969#issuecomment-496344977",
    "issue_url": "https://api.github.com/repos/expressjs/express/issues/3969",
    "id": 496344977,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ5NjM0NDk3Nw==",
    "user": {
      "login": "pirey",
      "id": 10344542,
      "node_id": "MDQ6VXNlcjEwMzQ0NTQy",
      "avatar_url": "https://avatars.githubusercontent.com/u/10344542?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pirey",
      "html_url": "https://github.com/pirey",
      "followers_url": "https://api.github.com/users/pirey/followers",
      "following_url": "https://api.github.com/users/pirey/following{/other_user}",
      "gists_url": "https://api.github.com/users/pirey/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pirey/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pirey/subscriptions",
      "organizations_url": "https://api.github.com/users/pirey/orgs",
      "repos_url": "https://api.github.com/users/pirey/repos",
      "events_url": "https://api.github.com/users/pirey/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pirey/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-05-28T02:44:38Z",
    "updated_at": "2019-05-28T02:44:58Z",
    "author_association": "NONE",
    "body": "Hi @dougwilson , thanks for your response.\r\n\r\nSo here it is\r\n1. Node version: v10.15.0\r\n2. Express version: ^4.17.0\r\n3. https://github.com/pirey/express-array-middleware-issue\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/expressjs/express/issues/comments/496344977/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/expressjs/express/issues/comments/496345728",
    "html_url": "https://github.com/expressjs/express/issues/3969#issuecomment-496345728",
    "issue_url": "https://api.github.com/repos/expressjs/express/issues/3969",
    "id": 496345728,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ5NjM0NTcyOA==",
    "user": {
      "login": "dougwilson",
      "id": 67512,
      "node_id": "MDQ6VXNlcjY3NTEy",
      "avatar_url": "https://avatars.githubusercontent.com/u/67512?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dougwilson",
      "html_url": "https://github.com/dougwilson",
      "followers_url": "https://api.github.com/users/dougwilson/followers",
      "following_url": "https://api.github.com/users/dougwilson/following{/other_user}",
      "gists_url": "https://api.github.com/users/dougwilson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dougwilson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dougwilson/subscriptions",
      "organizations_url": "https://api.github.com/users/dougwilson/orgs",
      "repos_url": "https://api.github.com/users/dougwilson/repos",
      "events_url": "https://api.github.com/users/dougwilson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dougwilson/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-05-28T02:49:23Z",
    "updated_at": "2019-05-28T02:49:23Z",
    "author_association": "MEMBER",
    "body": "Thank you so much for putting that together and sharing! I was able to run it and I see what the issue is:\r\n\r\nThe way the code is setup, passing in the given JWT does not create any error. The one you show working woks because the middleware you have written is not an error-handler middleware, so it's called when there was no error (which is the case). The one marked not working does not call the middleware because the middleware is an error-handler middleware, but no error occurred, so the middleware was not invoked.\r\n\r\nError-handling middleware is only invoked if there is an error.\r\n\r\nYou can read more about error-handling middleware on our site http://expressjs.com/en/guide/error-handling.html I hope this helps!",
    "reactions": {
      "url": "https://api.github.com/repos/expressjs/express/issues/comments/496345728/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/expressjs/express/issues/comments/496346887",
    "html_url": "https://github.com/expressjs/express/issues/3969#issuecomment-496346887",
    "issue_url": "https://api.github.com/repos/expressjs/express/issues/3969",
    "id": 496346887,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ5NjM0Njg4Nw==",
    "user": {
      "login": "pirey",
      "id": 10344542,
      "node_id": "MDQ6VXNlcjEwMzQ0NTQy",
      "avatar_url": "https://avatars.githubusercontent.com/u/10344542?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pirey",
      "html_url": "https://github.com/pirey",
      "followers_url": "https://api.github.com/users/pirey/followers",
      "following_url": "https://api.github.com/users/pirey/following{/other_user}",
      "gists_url": "https://api.github.com/users/pirey/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pirey/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pirey/subscriptions",
      "organizations_url": "https://api.github.com/users/pirey/orgs",
      "repos_url": "https://api.github.com/users/pirey/repos",
      "events_url": "https://api.github.com/users/pirey/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pirey/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-05-28T02:56:17Z",
    "updated_at": "2019-05-28T02:56:17Z",
    "author_association": "NONE",
    "body": "Ooh..\r\nso express middleware with 4 params will **_only_** get called when there is error.\r\nOk i get it, thanks for clarifying @dougwilson ",
    "reactions": {
      "url": "https://api.github.com/repos/expressjs/express/issues/comments/496346887/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
[
  {
    "url": "https://api.github.com/repos/expressjs/express/issues/comments/583475648",
    "html_url": "https://github.com/expressjs/express/issues/4176#issuecomment-583475648",
    "issue_url": "https://api.github.com/repos/expressjs/express/issues/4176",
    "id": 583475648,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU4MzQ3NTY0OA==",
    "user": {
      "login": "ghinks",
      "id": 5049078,
      "node_id": "MDQ6VXNlcjUwNDkwNzg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5049078?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ghinks",
      "html_url": "https://github.com/ghinks",
      "followers_url": "https://api.github.com/users/ghinks/followers",
      "following_url": "https://api.github.com/users/ghinks/following{/other_user}",
      "gists_url": "https://api.github.com/users/ghinks/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ghinks/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ghinks/subscriptions",
      "organizations_url": "https://api.github.com/users/ghinks/orgs",
      "repos_url": "https://api.github.com/users/ghinks/repos",
      "events_url": "https://api.github.com/users/ghinks/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ghinks/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-02-07T16:12:56Z",
    "updated_at": "2020-02-07T18:28:20Z",
    "author_association": "MEMBER",
    "body": "Hello **danhab99**  from what I can see of the question it appears that you are setting up authentication on the server using express and passport. If there is a session with passport then you proceed to the next middleware by calling next. If not then you are trying to redirect to the **/login** route. Is my interpretation correct?  I created a little [gist](https://gist.github.com/ghinks/4c584768bddc636bcbe72c1422afa668) so we can try to reproduce your issue. I am getting the following from curl \r\n```\r\n>curl http://localhost:3000/unauthed --verbose\r\n*   Trying ::1...\r\n* TCP_NODELAY set\r\n* Connected to localhost (::1) port 3000 (#0)\r\n> GET /unauthed HTTP/1.1\r\n> Host: localhost:3000\r\n> User-Agent: curl/7.64.1\r\n> Accept: */*\r\n> \r\n< HTTP/1.1 302 Found\r\n< X-Powered-By: Express\r\n< Location: /login\r\n< Vary: Accept\r\n< Content-Type: text/plain; charset=utf-8\r\n< Content-Length: 28\r\n< Date: Fri, 07 Feb 2020 18:24:57 GMT\r\n< Connection: keep-alive\r\n< \r\n* Connection #0 to host localhost left intact\r\nFound. Redirecting to /login* Closing connection 0\r\n\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/expressjs/express/issues/comments/583475648/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/expressjs/express/issues/comments/583563547",
    "html_url": "https://github.com/expressjs/express/issues/4176#issuecomment-583563547",
    "issue_url": "https://api.github.com/repos/expressjs/express/issues/4176",
    "id": 583563547,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU4MzU2MzU0Nw==",
    "user": {
      "login": "danhab99",
      "id": 13894263,
      "node_id": "MDQ6VXNlcjEzODk0MjYz",
      "avatar_url": "https://avatars.githubusercontent.com/u/13894263?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/danhab99",
      "html_url": "https://github.com/danhab99",
      "followers_url": "https://api.github.com/users/danhab99/followers",
      "following_url": "https://api.github.com/users/danhab99/following{/other_user}",
      "gists_url": "https://api.github.com/users/danhab99/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/danhab99/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/danhab99/subscriptions",
      "organizations_url": "https://api.github.com/users/danhab99/orgs",
      "repos_url": "https://api.github.com/users/danhab99/repos",
      "events_url": "https://api.github.com/users/danhab99/events{/privacy}",
      "received_events_url": "https://api.github.com/users/danhab99/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-02-07T19:20:41Z",
    "updated_at": "2020-02-07T19:20:41Z",
    "author_association": "NONE",
    "body": "No, if you look at my bash output, you'll notice that the message is truncated. The last byte never gets sent and that causes the browser to wait until it times out.\r\n\r\n> curl: (28) Operation timed out after 5000 milliseconds with 27 out of 28 bytes received\r\nFound. Redirecting to /logi \r\n\r\nCurl says it only got \"27 out of 28 bytes\". How do I correct that?",
    "reactions": {
      "url": "https://api.github.com/repos/expressjs/express/issues/comments/583563547/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/expressjs/express/issues/comments/583620971",
    "html_url": "https://github.com/expressjs/express/issues/4176#issuecomment-583620971",
    "issue_url": "https://api.github.com/repos/expressjs/express/issues/4176",
    "id": 583620971,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU4MzYyMDk3MQ==",
    "user": {
      "login": "jonchurch",
      "id": 12915163,
      "node_id": "MDQ6VXNlcjEyOTE1MTYz",
      "avatar_url": "https://avatars.githubusercontent.com/u/12915163?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonchurch",
      "html_url": "https://github.com/jonchurch",
      "followers_url": "https://api.github.com/users/jonchurch/followers",
      "following_url": "https://api.github.com/users/jonchurch/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonchurch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonchurch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonchurch/subscriptions",
      "organizations_url": "https://api.github.com/users/jonchurch/orgs",
      "repos_url": "https://api.github.com/users/jonchurch/repos",
      "events_url": "https://api.github.com/users/jonchurch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonchurch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-02-07T21:27:14Z",
    "updated_at": "2020-02-07T21:28:03Z",
    "author_association": "MEMBER",
    "body": "@danhab99 Hmm this does seem strange. What version of Node are you using when this occurs? Can you reproduce it on multiple versions of Node?\r\n\r\nI don't have any suggestions currently, and I would also just be guessing mostly. \r\n\r\nCan you create a standalone reproduction of this error so someone can take a look at it?\r\n\r\nIf you can post the minimal, but complete (something that can be run locally), code that produces this error it would go a long way towards figuring out what's happening.",
    "reactions": {
      "url": "https://api.github.com/repos/expressjs/express/issues/comments/583620971/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/expressjs/express/issues/comments/603022314",
    "html_url": "https://github.com/expressjs/express/issues/4176#issuecomment-603022314",
    "issue_url": "https://api.github.com/repos/expressjs/express/issues/4176",
    "id": 603022314,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYwMzAyMjMxNA==",
    "user": {
      "login": "dougwilson",
      "id": 67512,
      "node_id": "MDQ6VXNlcjY3NTEy",
      "avatar_url": "https://avatars.githubusercontent.com/u/67512?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dougwilson",
      "html_url": "https://github.com/dougwilson",
      "followers_url": "https://api.github.com/users/dougwilson/followers",
      "following_url": "https://api.github.com/users/dougwilson/following{/other_user}",
      "gists_url": "https://api.github.com/users/dougwilson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dougwilson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dougwilson/subscriptions",
      "organizations_url": "https://api.github.com/users/dougwilson/orgs",
      "repos_url": "https://api.github.com/users/dougwilson/repos",
      "events_url": "https://api.github.com/users/dougwilson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dougwilson/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-03-24T05:20:59Z",
    "updated_at": "2020-03-24T05:20:59Z",
    "author_association": "MEMBER",
    "body": "Closing due to no response.",
    "reactions": {
      "url": "https://api.github.com/repos/expressjs/express/issues/comments/603022314/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/expressjs/express/issues/comments/1023638908",
    "html_url": "https://github.com/expressjs/express/issues/4176#issuecomment-1023638908",
    "issue_url": "https://api.github.com/repos/expressjs/express/issues/4176",
    "id": 1023638908,
    "node_id": "IC_kwDOAAOeZ849A318",
    "user": {
      "login": "jdhuntington",
      "id": 147,
      "node_id": "MDQ6VXNlcjE0Nw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/147?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jdhuntington",
      "html_url": "https://github.com/jdhuntington",
      "followers_url": "https://api.github.com/users/jdhuntington/followers",
      "following_url": "https://api.github.com/users/jdhuntington/following{/other_user}",
      "gists_url": "https://api.github.com/users/jdhuntington/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jdhuntington/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jdhuntington/subscriptions",
      "organizations_url": "https://api.github.com/users/jdhuntington/orgs",
      "repos_url": "https://api.github.com/users/jdhuntington/repos",
      "events_url": "https://api.github.com/users/jdhuntington/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jdhuntington/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-27T21:06:41Z",
    "updated_at": "2022-01-27T21:06:41Z",
    "author_association": "NONE",
    "body": "I have been running into the exact same problem and just discovered this PR: https://github.com/expressjs/session/pull/244\r\n\r\nThe comments about not calling `next` after sending a response were useful, and indeed were the cause of my application not sending the last byte to the client.",
    "reactions": {
      "url": "https://api.github.com/repos/expressjs/express/issues/comments/1023638908/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
[
  {
    "url": "https://api.github.com/repos/expressjs/express/issues/comments/636289047",
    "html_url": "https://github.com/expressjs/express/issues/4300#issuecomment-636289047",
    "issue_url": "https://api.github.com/repos/expressjs/express/issues/4300",
    "id": 636289047,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYzNjI4OTA0Nw==",
    "user": {
      "login": "r0mflip",
      "id": 37770235,
      "node_id": "MDQ6VXNlcjM3NzcwMjM1",
      "avatar_url": "https://avatars.githubusercontent.com/u/37770235?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/r0mflip",
      "html_url": "https://github.com/r0mflip",
      "followers_url": "https://api.github.com/users/r0mflip/followers",
      "following_url": "https://api.github.com/users/r0mflip/following{/other_user}",
      "gists_url": "https://api.github.com/users/r0mflip/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/r0mflip/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/r0mflip/subscriptions",
      "organizations_url": "https://api.github.com/users/r0mflip/orgs",
      "repos_url": "https://api.github.com/users/r0mflip/repos",
      "events_url": "https://api.github.com/users/r0mflip/events{/privacy}",
      "received_events_url": "https://api.github.com/users/r0mflip/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-05-30T06:57:05Z",
    "updated_at": "2020-05-30T06:57:05Z",
    "author_association": "NONE",
    "body": "You should probably try using path prefix while using `express.static`\r\n\r\n```js\r\nexport const app: Express = express();\r\n\r\nconst app_build: string = '../clients/ops_ui';\r\nconst wf_build: string = '../clients/wf_ui';\r\n\r\n// Handle inner paths first\r\napp.use('/wf/*', express.static(wf_build));\r\n\r\n// Hand root at last\r\napp.use('/*', express.static(app_build));\r\n\r\n// Handle 404 and other paths down here\r\napp.get('*', (req: Request, res: Response) => {\r\n  res.sendFile('index.html', { root: app_build });\r\n});\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/expressjs/express/issues/comments/636289047/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/expressjs/express/issues/comments/636343276",
    "html_url": "https://github.com/expressjs/express/issues/4300#issuecomment-636343276",
    "issue_url": "https://api.github.com/repos/expressjs/express/issues/4300",
    "id": 636343276,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYzNjM0MzI3Ng==",
    "user": {
      "login": "vadymrybak",
      "id": 38698086,
      "node_id": "MDQ6VXNlcjM4Njk4MDg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/38698086?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vadymrybak",
      "html_url": "https://github.com/vadymrybak",
      "followers_url": "https://api.github.com/users/vadymrybak/followers",
      "following_url": "https://api.github.com/users/vadymrybak/following{/other_user}",
      "gists_url": "https://api.github.com/users/vadymrybak/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vadymrybak/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vadymrybak/subscriptions",
      "organizations_url": "https://api.github.com/users/vadymrybak/orgs",
      "repos_url": "https://api.github.com/users/vadymrybak/repos",
      "events_url": "https://api.github.com/users/vadymrybak/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vadymrybak/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-05-30T15:07:53Z",
    "updated_at": "2020-05-30T15:07:53Z",
    "author_association": "NONE",
    "body": "> You should probably try using path prefix while using `express.static`\r\n> \r\n> ```js\r\n> export const app: Express = express();\r\n> \r\n> const app_build: string = '../clients/ops_ui';\r\n> const wf_build: string = '../clients/wf_ui';\r\n> \r\n> // Handle inner paths first\r\n> app.use('/wf/*', express.static(wf_build));\r\n> \r\n> // Hand root at last\r\n> app.use('/*', express.static(app_build));\r\n> \r\n> // Handle 404 and other paths down here\r\n> app.get('*', (req: Request, res: Response) => {\r\n>   res.sendFile('index.html', { root: app_build });\r\n> });\r\n> ```\r\n\r\nThanks, now there is no strange behaviour with refreshing each route but all static files like css, js, etc return me index.html page contents...So i'm back to this error I've had before:\r\n\r\nUncaught SyntaxError: Unexpected token '<'",
    "reactions": {
      "url": "https://api.github.com/repos/expressjs/express/issues/comments/636343276/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/expressjs/express/issues/comments/636423103",
    "html_url": "https://github.com/expressjs/express/issues/4300#issuecomment-636423103",
    "issue_url": "https://api.github.com/repos/expressjs/express/issues/4300",
    "id": 636423103,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYzNjQyMzEwMw==",
    "user": {
      "login": "r0mflip",
      "id": 37770235,
      "node_id": "MDQ6VXNlcjM3NzcwMjM1",
      "avatar_url": "https://avatars.githubusercontent.com/u/37770235?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/r0mflip",
      "html_url": "https://github.com/r0mflip",
      "followers_url": "https://api.github.com/users/r0mflip/followers",
      "following_url": "https://api.github.com/users/r0mflip/following{/other_user}",
      "gists_url": "https://api.github.com/users/r0mflip/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/r0mflip/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/r0mflip/subscriptions",
      "organizations_url": "https://api.github.com/users/r0mflip/orgs",
      "repos_url": "https://api.github.com/users/r0mflip/repos",
      "events_url": "https://api.github.com/users/r0mflip/events{/privacy}",
      "received_events_url": "https://api.github.com/users/r0mflip/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-05-31T05:12:18Z",
    "updated_at": "2020-05-31T05:12:18Z",
    "author_association": "NONE",
    "body": "Well that depends where the static files located and the URL being called relative to the paths.\r\n\r\nIf your paths are not right then you will end up with getting the index file for every 404. The example provided is a simple on, but for (any) SPA requirement you should handle all known paths (where resources are available) manually by specifying each of them (or use patterns). And at last you should fall back to 404's.\r\n\r\nAssuming most of your codebase is static files, the point where you handle `app.get('*', ...)` should be the place where your should return a 404 page, not the index.\r\n\r\nIf this doesn't fix your issue or you need more debugging help, follow up at https://gitter.im/expressjs/express",
    "reactions": {
      "url": "https://api.github.com/repos/expressjs/express/issues/comments/636423103/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/expressjs/express/issues/comments/636488058",
    "html_url": "https://github.com/expressjs/express/issues/4300#issuecomment-636488058",
    "issue_url": "https://api.github.com/repos/expressjs/express/issues/4300",
    "id": 636488058,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYzNjQ4ODA1OA==",
    "user": {
      "login": "vadymrybak",
      "id": 38698086,
      "node_id": "MDQ6VXNlcjM4Njk4MDg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/38698086?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vadymrybak",
      "html_url": "https://github.com/vadymrybak",
      "followers_url": "https://api.github.com/users/vadymrybak/followers",
      "following_url": "https://api.github.com/users/vadymrybak/following{/other_user}",
      "gists_url": "https://api.github.com/users/vadymrybak/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vadymrybak/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vadymrybak/subscriptions",
      "organizations_url": "https://api.github.com/users/vadymrybak/orgs",
      "repos_url": "https://api.github.com/users/vadymrybak/repos",
      "events_url": "https://api.github.com/users/vadymrybak/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vadymrybak/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-05-31T15:40:43Z",
    "updated_at": "2020-05-31T15:40:43Z",
    "author_association": "NONE",
    "body": "Thanks @r0mflip . I think your idea helped. So after playing around with the routes I came up with code below:\r\n\r\n```\r\nconst build: string = \"../clients\";\r\nconst ops_ui: string = build + '/ops_ui';\r\nconst wf_ui: string = build + '/wf_ui';\r\n\r\n// WF_UI\r\napp.use('/wf/', express.static(wf_ui));\r\napp.use('/static/js', express.static(build + \"/static/js\"));\r\napp.use('/static/css', express.static(build + \"/static/css\"));\r\napp.use('/static/media', express.static(build + \"/static/media\"));\r\napp.use('/splash.png', express.static(build + \"/splash.png\"));\r\napp.use('/logo.svg', express.static(wf_ui + \"/logo.svg\"));\r\napp.use('/manifest.json', express.static(wf_ui + \"/manifest.json\"));\r\n\r\n// OPs_UI\r\napp.use('/loading2.gif', express.static(ops_ui + \"/loading2.gif\"));\r\napp.use('/loading_small.gif', express.static(ops_ui + \"/loading_small.gif\"));\r\napp.get('/', (req: Request, res: Response) => {\r\n  res.sendFile('index.html', { root: ops_ui });\r\n});\r\napp.get('/home', (req: Request, res: Response) => {\r\n  res.sendFile('index.html', { root: ops_ui });\r\n});\r\napp.get('/orders', (req: Request, res: Response) => {\r\n  res.sendFile('index.html', { root: ops_ui });\r\n});\r\napp.get('/manualTasks', (req: Request, res: Response) => {\r\n  res.sendFile('index.html', { root: ops_ui });\r\n});\r\n```\r\n\r\nThe only extra difficulty it adds during deployment is that I had move all static files from both UIs into one common static folder, luckily all css and js files had random hash in their file names. If previously my folder structure was: \r\n\r\n- clients\r\n  - ops_ui\r\n     - static\r\n      index.html\r\n   - wf_ui\r\n     - static\r\n     index.html\r\n\r\nThen now it's:\r\n\r\n- clients\r\n  - static\r\n    - css\r\n    - js\r\n    - media\r\n  - ops_ui\r\n      index.html\r\n   - wf_ui\r\n     index.html\r\n\r\nMy only question is: is that correct approach or too sloppy?",
    "reactions": {
      "url": "https://api.github.com/repos/expressjs/express/issues/comments/636488058/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/expressjs/express/issues/comments/636489795",
    "html_url": "https://github.com/expressjs/express/issues/4300#issuecomment-636489795",
    "issue_url": "https://api.github.com/repos/expressjs/express/issues/4300",
    "id": 636489795,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYzNjQ4OTc5NQ==",
    "user": {
      "login": "r0mflip",
      "id": 37770235,
      "node_id": "MDQ6VXNlcjM3NzcwMjM1",
      "avatar_url": "https://avatars.githubusercontent.com/u/37770235?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/r0mflip",
      "html_url": "https://github.com/r0mflip",
      "followers_url": "https://api.github.com/users/r0mflip/followers",
      "following_url": "https://api.github.com/users/r0mflip/following{/other_user}",
      "gists_url": "https://api.github.com/users/r0mflip/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/r0mflip/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/r0mflip/subscriptions",
      "organizations_url": "https://api.github.com/users/r0mflip/orgs",
      "repos_url": "https://api.github.com/users/r0mflip/repos",
      "events_url": "https://api.github.com/users/r0mflip/events{/privacy}",
      "received_events_url": "https://api.github.com/users/r0mflip/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-05-31T15:54:39Z",
    "updated_at": "2020-05-31T15:54:39Z",
    "author_association": "NONE",
    "body": "Well, simply put untill your hierarchy isn't unnecessarily deep and no resources have _duplicates_ of it, you should be just fine.\n\nThere's no _correct_ way to do _anything_. Refactor based on whats efficient for your work flow.\n\nMy only other suggestion would be to use a `Router` to map out your static asset paths.  Would be a neat refactor.",
    "reactions": {
      "url": "https://api.github.com/repos/expressjs/express/issues/comments/636489795/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/expressjs/express/issues/comments/638874821",
    "html_url": "https://github.com/expressjs/express/issues/4300#issuecomment-638874821",
    "issue_url": "https://api.github.com/repos/expressjs/express/issues/4300",
    "id": 638874821,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYzODg3NDgyMQ==",
    "user": {
      "login": "vadymrybak",
      "id": 38698086,
      "node_id": "MDQ6VXNlcjM4Njk4MDg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/38698086?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vadymrybak",
      "html_url": "https://github.com/vadymrybak",
      "followers_url": "https://api.github.com/users/vadymrybak/followers",
      "following_url": "https://api.github.com/users/vadymrybak/following{/other_user}",
      "gists_url": "https://api.github.com/users/vadymrybak/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vadymrybak/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vadymrybak/subscriptions",
      "organizations_url": "https://api.github.com/users/vadymrybak/orgs",
      "repos_url": "https://api.github.com/users/vadymrybak/repos",
      "events_url": "https://api.github.com/users/vadymrybak/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vadymrybak/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-06-04T14:11:37Z",
    "updated_at": "2020-06-04T14:11:37Z",
    "author_association": "NONE",
    "body": "thanks @r0mflip ",
    "reactions": {
      "url": "https://api.github.com/repos/expressjs/express/issues/comments/638874821/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
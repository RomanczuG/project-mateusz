[
  {
    "url": "https://api.github.com/repos/expressjs/express/issues/comments/459351424",
    "html_url": "https://github.com/expressjs/express/issues/3869#issuecomment-459351424",
    "issue_url": "https://api.github.com/repos/expressjs/express/issues/3869",
    "id": 459351424,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1OTM1MTQyNA==",
    "user": {
      "login": "dougwilson",
      "id": 67512,
      "node_id": "MDQ6VXNlcjY3NTEy",
      "avatar_url": "https://avatars.githubusercontent.com/u/67512?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dougwilson",
      "html_url": "https://github.com/dougwilson",
      "followers_url": "https://api.github.com/users/dougwilson/followers",
      "following_url": "https://api.github.com/users/dougwilson/following{/other_user}",
      "gists_url": "https://api.github.com/users/dougwilson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dougwilson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dougwilson/subscriptions",
      "organizations_url": "https://api.github.com/users/dougwilson/orgs",
      "repos_url": "https://api.github.com/users/dougwilson/repos",
      "events_url": "https://api.github.com/users/dougwilson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dougwilson/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-01-31T13:52:52Z",
    "updated_at": "2019-01-31T13:52:52Z",
    "author_association": "MEMBER",
    "body": "Hi! Thanks for your contribution. I'm a little confused on what exactly changing the cache key does. The contents that are saved in express under the cache do not contain the options you pass into render, and are purely based on the filename, which is why the key is on the file name.\r\n\r\nMaybe it would help me understand if you can show in what case would result in the same file have two different data sets saved in the express view cache?",
    "reactions": {
      "url": "https://api.github.com/repos/expressjs/express/issues/comments/459351424/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/expressjs/express/issues/comments/459431775",
    "html_url": "https://github.com/expressjs/express/issues/3869#issuecomment-459431775",
    "issue_url": "https://api.github.com/repos/expressjs/express/issues/3869",
    "id": 459431775,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1OTQzMTc3NQ==",
    "user": {
      "login": "mkalygin",
      "id": 1662910,
      "node_id": "MDQ6VXNlcjE2NjI5MTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1662910?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mkalygin",
      "html_url": "https://github.com/mkalygin",
      "followers_url": "https://api.github.com/users/mkalygin/followers",
      "following_url": "https://api.github.com/users/mkalygin/following{/other_user}",
      "gists_url": "https://api.github.com/users/mkalygin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mkalygin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mkalygin/subscriptions",
      "organizations_url": "https://api.github.com/users/mkalygin/orgs",
      "repos_url": "https://api.github.com/users/mkalygin/repos",
      "events_url": "https://api.github.com/users/mkalygin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mkalygin/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-01-31T17:27:20Z",
    "updated_at": "2019-01-31T17:28:42Z",
    "author_association": "NONE",
    "body": "@dougwilson My use case was related to Pug's [filters](https://pugjs.org/language/filters.html). Specifically in the documentation there is a warning:\r\n\r\n> Filters are rendered at compile time. This makes them fast, but it also means that they cannot support dynamic content or options.\r\n\r\nIn my case I have a filter which output depends on a cookie value, e.g. `:markdown` filter. I want to pass different Markdown to the filter depending on the cookie value. But since the filter is only rendered at compile time and the result is cached, I only get correct output once. If I change the cookie value, I get the cached result and I have no control over this behavior. I can't tell Express that this view is actually different because of the new cookie value.\r\n\r\nIf it's still not clear what I mean I'll be able to provide a demo app later this week.\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/expressjs/express/issues/comments/459431775/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/expressjs/express/issues/comments/459432744",
    "html_url": "https://github.com/expressjs/express/issues/3869#issuecomment-459432744",
    "issue_url": "https://api.github.com/repos/expressjs/express/issues/3869",
    "id": 459432744,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1OTQzMjc0NA==",
    "user": {
      "login": "dougwilson",
      "id": 67512,
      "node_id": "MDQ6VXNlcjY3NTEy",
      "avatar_url": "https://avatars.githubusercontent.com/u/67512?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dougwilson",
      "html_url": "https://github.com/dougwilson",
      "followers_url": "https://api.github.com/users/dougwilson/followers",
      "following_url": "https://api.github.com/users/dougwilson/following{/other_user}",
      "gists_url": "https://api.github.com/users/dougwilson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dougwilson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dougwilson/subscriptions",
      "organizations_url": "https://api.github.com/users/dougwilson/orgs",
      "repos_url": "https://api.github.com/users/dougwilson/repos",
      "events_url": "https://api.github.com/users/dougwilson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dougwilson/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-01-31T17:30:02Z",
    "updated_at": "2019-01-31T17:30:02Z",
    "author_association": "MEMBER",
    "body": "Yes, it is still not clear. Express does not cache anything about the template besides it's full file path and which rendering engine to use (pug in this case). It does not compile the template and cache the compiled result, etc. It is unclear what exactly in the Express.js cache is actually affecting your use-case, as the only values in the cache is just the absolute file name and which rendering engine to use... Express.js doesn't even read in the contents of the file.",
    "reactions": {
      "url": "https://api.github.com/repos/expressjs/express/issues/comments/459432744/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/expressjs/express/issues/comments/459434742",
    "html_url": "https://github.com/expressjs/express/issues/3869#issuecomment-459434742",
    "issue_url": "https://api.github.com/repos/expressjs/express/issues/3869",
    "id": 459434742,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1OTQzNDc0Mg==",
    "user": {
      "login": "mkalygin",
      "id": 1662910,
      "node_id": "MDQ6VXNlcjE2NjI5MTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1662910?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mkalygin",
      "html_url": "https://github.com/mkalygin",
      "followers_url": "https://api.github.com/users/mkalygin/followers",
      "following_url": "https://api.github.com/users/mkalygin/following{/other_user}",
      "gists_url": "https://api.github.com/users/mkalygin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mkalygin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mkalygin/subscriptions",
      "organizations_url": "https://api.github.com/users/mkalygin/orgs",
      "repos_url": "https://api.github.com/users/mkalygin/repos",
      "events_url": "https://api.github.com/users/mkalygin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mkalygin/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-01-31T17:35:39Z",
    "updated_at": "2019-01-31T17:35:39Z",
    "author_association": "NONE",
    "body": "@dougwilson do you mean that it doesn't cache rendered template? It's probably Pug's cache then. I'll take a look and get back to you later.",
    "reactions": {
      "url": "https://api.github.com/repos/expressjs/express/issues/comments/459434742/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/expressjs/express/issues/comments/459435163",
    "html_url": "https://github.com/expressjs/express/issues/3869#issuecomment-459435163",
    "issue_url": "https://api.github.com/repos/expressjs/express/issues/3869",
    "id": 459435163,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1OTQzNTE2Mw==",
    "user": {
      "login": "dougwilson",
      "id": 67512,
      "node_id": "MDQ6VXNlcjY3NTEy",
      "avatar_url": "https://avatars.githubusercontent.com/u/67512?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dougwilson",
      "html_url": "https://github.com/dougwilson",
      "followers_url": "https://api.github.com/users/dougwilson/followers",
      "following_url": "https://api.github.com/users/dougwilson/following{/other_user}",
      "gists_url": "https://api.github.com/users/dougwilson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dougwilson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dougwilson/subscriptions",
      "organizations_url": "https://api.github.com/users/dougwilson/orgs",
      "repos_url": "https://api.github.com/users/dougwilson/repos",
      "events_url": "https://api.github.com/users/dougwilson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dougwilson/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-01-31T17:36:56Z",
    "updated_at": "2019-01-31T17:36:56Z",
    "author_association": "MEMBER",
    "body": "Correct, it caches nothing except the full file path and which rendering engine to use. Basically just caches the mapping of \"foo.pug -> /home/www/app/views/foo.pug\" and that that is a pug template.",
    "reactions": {
      "url": "https://api.github.com/repos/expressjs/express/issues/comments/459435163/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/expressjs/express/issues/comments/459437746",
    "html_url": "https://github.com/expressjs/express/issues/3869#issuecomment-459437746",
    "issue_url": "https://api.github.com/repos/expressjs/express/issues/3869",
    "id": 459437746,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1OTQzNzc0Ng==",
    "user": {
      "login": "mkalygin",
      "id": 1662910,
      "node_id": "MDQ6VXNlcjE2NjI5MTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1662910?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mkalygin",
      "html_url": "https://github.com/mkalygin",
      "followers_url": "https://api.github.com/users/mkalygin/followers",
      "following_url": "https://api.github.com/users/mkalygin/following{/other_user}",
      "gists_url": "https://api.github.com/users/mkalygin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mkalygin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mkalygin/subscriptions",
      "organizations_url": "https://api.github.com/users/mkalygin/orgs",
      "repos_url": "https://api.github.com/users/mkalygin/repos",
      "events_url": "https://api.github.com/users/mkalygin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mkalygin/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-01-31T17:44:08Z",
    "updated_at": "2019-01-31T17:44:08Z",
    "author_association": "NONE",
    "body": "@dougwilson yes, that's the Pug's cache. This https://github.com/pugjs/pug/pull/3099 provides an ability to control it through a custom cache key. I think we can close it.",
    "reactions": {
      "url": "https://api.github.com/repos/expressjs/express/issues/comments/459437746/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
[
  {
    "url": "https://api.github.com/repos/browserify/browserify/issues/comments/396773231",
    "html_url": "https://github.com/browserify/browserify/issues/1843#issuecomment-396773231",
    "issue_url": "https://api.github.com/repos/browserify/browserify/issues/1843",
    "id": 396773231,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5Njc3MzIzMQ==",
    "user": {
      "login": "falsandtru",
      "id": 3143368,
      "node_id": "MDQ6VXNlcjMxNDMzNjg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3143368?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/falsandtru",
      "html_url": "https://github.com/falsandtru",
      "followers_url": "https://api.github.com/users/falsandtru/followers",
      "following_url": "https://api.github.com/users/falsandtru/following{/other_user}",
      "gists_url": "https://api.github.com/users/falsandtru/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/falsandtru/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/falsandtru/subscriptions",
      "organizations_url": "https://api.github.com/users/falsandtru/orgs",
      "repos_url": "https://api.github.com/users/falsandtru/repos",
      "events_url": "https://api.github.com/users/falsandtru/events{/privacy}",
      "received_events_url": "https://api.github.com/users/falsandtru/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-13T00:11:17Z",
    "updated_at": "2018-06-13T00:11:17Z",
    "author_association": "NONE",
    "body": "Inputs of browserify:\r\n\r\n```js\r\n\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst coroutine_1 = require(\"./coroutine\");\r\nconst colistener_1 = require(\"./colistener\");\r\nconst cancellation_1 = require(\"./cancellation\");\r\nfunction cofetch(url, options) {\r\n    return new Cofetch(url, options);\r\n}\r\nexports.cofetch = cofetch;\r\nclass Cofetch extends coroutine_1.Coroutine {\r\n    constructor(url, opts = {}) {\r\n        super(async function* () {\r\n            this[coroutine_1.Coroutine.destructor] = this.cancel;\r\n            const xhr = new XMLHttpRequest();\r\n            const state = new cancellation_1.Cancellation();\r\n            const process = new colistener_1.Colistener(listener => {\r\n                void xhr.addEventListener('loadstart', listener);\r\n                void xhr.addEventListener('progress', listener);\r\n                void xhr.addEventListener('loadend', listener);\r\n                void ['error', 'abort', 'timeout']\r\n                    .forEach(type => void xhr.addEventListener(type, state.cancel));\r\n                void fetch(xhr, url, opts);\r\n                void this.cancellation.register(() => xhr.readyState < 4 &&\r\n                    void xhr.abort());\r\n                return () => undefined;\r\n            });\r\n            for await (const ev of process) {\r\n                assert(ev instanceof ProgressEvent);\r\n                assert(['loadstart', 'progress', 'loadend'].includes(ev.type));\r\n                yield ev;\r\n                if (ev.type !== 'loadend')\r\n                    continue;\r\n                void state.either(xhr)\r\n                    .extract(process[coroutine_1.Coroutine.terminator], process.close);\r\n            }\r\n            return process;\r\n        }, {}, false);\r\n        this.cancellation = new cancellation_1.Cancellation();\r\n        this.cancel = this.cancellation.cancel;\r\n        void this[coroutine_1.Coroutine.run]();\r\n    }\r\n}\r\nfunction fetch(xhr, url, options) {\r\n    assert(xhr.readyState === 0);\r\n    void xhr.open(options.method || 'GET', url);\r\n    for (const key of Object.keys(options)) {\r\n        switch (key) {\r\n            case 'method':\r\n            case 'body':\r\n                continue;\r\n            case 'headers':\r\n                [...options.headers.entries()]\r\n                    .forEach(([name, value]) => void xhr.setRequestHeader(name, value));\r\n                continue;\r\n            default:\r\n                if (key in xhr)\r\n                    xhr[key] = options[key];\r\n                continue;\r\n        }\r\n    }\r\n    void xhr.send(options.body || undefined);\r\n}\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/browserify/browserify/issues/comments/396773231/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/browserify/browserify/issues/comments/396775427",
    "html_url": "https://github.com/browserify/browserify/issues/1843#issuecomment-396775427",
    "issue_url": "https://api.github.com/repos/browserify/browserify/issues/1843",
    "id": 396775427,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5Njc3NTQyNw==",
    "user": {
      "login": "falsandtru",
      "id": 3143368,
      "node_id": "MDQ6VXNlcjMxNDMzNjg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3143368?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/falsandtru",
      "html_url": "https://github.com/falsandtru",
      "followers_url": "https://api.github.com/users/falsandtru/followers",
      "following_url": "https://api.github.com/users/falsandtru/following{/other_user}",
      "gists_url": "https://api.github.com/users/falsandtru/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/falsandtru/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/falsandtru/subscriptions",
      "organizations_url": "https://api.github.com/users/falsandtru/orgs",
      "repos_url": "https://api.github.com/users/falsandtru/repos",
      "events_url": "https://api.github.com/users/falsandtru/events{/privacy}",
      "received_events_url": "https://api.github.com/users/falsandtru/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-13T00:25:55Z",
    "updated_at": "2018-06-13T00:25:55Z",
    "author_association": "NONE",
    "body": "Looks like the problem is `this[coroutine_1.Coroutine.destructor] = this.cancel;`. However, the following simplified code makes no error.\r\n\r\n```js\r\n\"use strict\";\r\nconst destructor = Symbol();\r\nclass Coroutine {\r\n    constructor(gen, opts = {}, autorun = true) {\r\n    }\r\n}\r\nCoroutine.destructor = destructor;\r\nclass Cofetch extends Coroutine {\r\n    constructor(url, opts = {}) {\r\n        super(async function* () {\r\n            this[Coroutine.destructor] = this.cancel;\r\n        }, {}, false);\r\n    }\r\n}\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/browserify/browserify/issues/comments/396775427/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/browserify/browserify/issues/comments/396940018",
    "html_url": "https://github.com/browserify/browserify/issues/1843#issuecomment-396940018",
    "issue_url": "https://api.github.com/repos/browserify/browserify/issues/1843",
    "id": 396940018,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5Njk0MDAxOA==",
    "user": {
      "login": "goto-bus-stop",
      "id": 1006268,
      "node_id": "MDQ6VXNlcjEwMDYyNjg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1006268?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/goto-bus-stop",
      "html_url": "https://github.com/goto-bus-stop",
      "followers_url": "https://api.github.com/users/goto-bus-stop/followers",
      "following_url": "https://api.github.com/users/goto-bus-stop/following{/other_user}",
      "gists_url": "https://api.github.com/users/goto-bus-stop/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/goto-bus-stop/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/goto-bus-stop/subscriptions",
      "organizations_url": "https://api.github.com/users/goto-bus-stop/orgs",
      "repos_url": "https://api.github.com/users/goto-bus-stop/repos",
      "events_url": "https://api.github.com/users/goto-bus-stop/events{/privacy}",
      "received_events_url": "https://api.github.com/users/goto-bus-stop/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-13T13:37:26Z",
    "updated_at": "2018-06-13T13:37:26Z",
    "author_association": "MEMBER",
    "body": "The lines browserify reports are a bit off (i'll check that out). If I call `acorn.parse` directly the error points to the star on this line:\r\n\r\n```js\r\nsuper(async function* () {\r\n//               ---^\r\n```\r\n\r\nLooks like the error is coming from [insert-module-globals](https://github.com/browserify/insert-module-globals), which uses [lexical-scope](https://github.com/substack/lexical-scope), which doesn't support a lot of new syntax yet. https://github.com/browserify/insert-module-globals/pull/76 would most likely fix it :thinking: ",
    "reactions": {
      "url": "https://api.github.com/repos/browserify/browserify/issues/comments/396940018/reactions",
      "total_count": 2,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 1,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/browserify/browserify/issues/comments/397904871",
    "html_url": "https://github.com/browserify/browserify/issues/1843#issuecomment-397904871",
    "issue_url": "https://api.github.com/repos/browserify/browserify/issues/1843",
    "id": 397904871,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5NzkwNDg3MQ==",
    "user": {
      "login": "falsandtru",
      "id": 3143368,
      "node_id": "MDQ6VXNlcjMxNDMzNjg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3143368?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/falsandtru",
      "html_url": "https://github.com/falsandtru",
      "followers_url": "https://api.github.com/users/falsandtru/followers",
      "following_url": "https://api.github.com/users/falsandtru/following{/other_user}",
      "gists_url": "https://api.github.com/users/falsandtru/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/falsandtru/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/falsandtru/subscriptions",
      "organizations_url": "https://api.github.com/users/falsandtru/orgs",
      "repos_url": "https://api.github.com/users/falsandtru/repos",
      "events_url": "https://api.github.com/users/falsandtru/events{/privacy}",
      "received_events_url": "https://api.github.com/users/falsandtru/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-17T20:37:34Z",
    "updated_at": "2018-06-17T20:37:34Z",
    "author_association": "NONE",
    "body": "Now browserify can compile this code, thanks!",
    "reactions": {
      "url": "https://api.github.com/repos/browserify/browserify/issues/comments/397904871/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]